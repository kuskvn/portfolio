function slugify(e){var s="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;";new RegExp(s.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(function(e,a){"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(s.indexOf(a))}).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function displayAdUnit(e,a,s,n,t){var i=[];return i.push('<div class="ad">'),i.push('<a href="'+e+"\"\n\t\t\t   target=\"_blank\" \n\t\t \t   onclick=\"gtag('send', 'event', 'ads', 'click', '"+a+"', { 'url': '"+e+"' } )\">"),i.push('<img class="image_desktop" alt="Advertisement: '+s+'" src="'+n[0].url+"\" onload=\"gtag('send', 'event', 'ads', 'impression', '"+a+"', { 'url': '"+e+"' } )\" />"),t&&i.push('<img class="image_mobile" alt="Advertisement: '+s+'" src="'+t[0].url+"\" onload=\"gtag('send', 'event', 'ads', 'impression', '"+a+"', { 'url': '"+e+"' } )\" />"),i.push("</a>"),i.push("</div>"),i.join("\n")}function shuffle(e){for(var a,s,n=e.length;n;a=Math.floor(Math.random()*n),s=e[--n],e[n]=e[a],e[a]=s);return e}function getAdUnits(e){var o=[],d=[];jQuery(e.records).each(function(e,a){var s=a.fields["Ad Title"],n=a.fields["Ad URL"],t=slugify(s),i=a.fields.Image,r=a.fields["Image mobile"],l=a.fields["Publish ready"];"Tile"==a.fields["Ad Type"]&&1==l&&o.push(displayAdUnit(n,t,s,i,r)),"Banner"==a.fields["Ad Type"]&&1==l&&d.push(displayAdUnit(n,t,s,i,r))}),o&&""!=o&&jQuery(".ads_container").html(shuffle(o).join("\n")),d&&""!=d&&(jQuery(".ad_970 div").html(d[Math.floor(Math.random()*d.length)]),jQuery(".ad_970").addClass("visible"))}jQuery(document).ready(function(e){e.ajax({type:"GET",url:"https://brooklynrail.org/.netlify/functions/ads",data:{todo:"jsonp"},dataType:"jsonp",jsonpCallback:"rail_ads",crossDomain:!0,cache:!1,success:getAdUnits,error:function(e,a,s){console.log("error getting Ads Data"),console.log(s)}})});
function displayHat(o,a,t,e,r,s){var l=r&&s?'style="background-color:'+r+"; color:"+s+'"':"",n=r&&s?'style="color:'+s+';"':"",i=[];return i.push('<a class="hat" href="'+e+'" title="'+o+'"><section '+l+'><div class="grid-container grid-container-desktop"><div class="grid-row"><div class="grid-col-12"><p '+n+">"+a+" <span "+n+">"+t+" &#187;</span></p></div></div></div></section></a>"),i.join("\n")}function shuffle(o){for(var a,t,e=o.length;e;a=Math.floor(Math.random()*e),t=o[--e],o[e]=o[a],o[a]=t);return o}function getHatData(o){var i=[];jQuery(o.records).each(function(o,a){var t,e,r,s,l,n;1==a.fields.Publish&&(t=a.fields["Hat Title"],console.log(t),e=a.fields.Copy,r=a.fields["Action Text"],s=a.fields["Action URL"],l=a.fields["Background Color"],n=a.fields["Text Color"],i.push(displayHat(t,e,r,s,l,n)))}),i&&""!=i&&jQuery(".hatbox").replaceWith(i[Math.floor(Math.random()*i.length)]).addClass("visible")}jQuery(document).ready(function(o){o.ajax({type:"GET",url:"https://brooklynrail.org/.netlify/functions/hat",data:{todo:"jsonp"},dataType:"jsonp",jsonpCallback:"rail_hats",crossDomain:!0,cache:!1,success:getHatData,error:function(o,a,t){console.log("error getting Hat Data"),console.log(t)}})});
function is_mobile(){window.innerWidth}is_mobile(),$(window).resize(function(){is_mobile()});
jQuery(document).ready(function(e){e(".media a").click(function(e){e.preventDefault()})});
jQuery(document).ready(function(n){function e(){n(".paper").addClass("open")}function c(){n(".paper").removeClass("open")}n(".mobile_nav_btn").click(function(n){n.preventDefault(),e()}),n(".close").click(function(){c()}),n(".paper .screen").click(function(){c()}),n(document).bind("keyup",function(n){if(27==n.keyCode)return((this.tog=!this.tog)?e:c)()})});
jQuery(document).ready(function(t){t(document).bind("keyup",function(e){48==e.keyCode&&t(".paper").toggleClass("testing")}),t(document).bind("keyup",function(e){var n;39!=e.keyCode||!e.shiftKey||(n=window.open(function(){var e=t(".issue-index li.current"),n=t(e).next().find("a");if(0==n.length&&(n=t(e).closest("ul").nextAll(":has(.article)").find(".article:first a")),0<n.length){var i=t(n).attr("href");return window.location.origin+i}}(),"_self"))&&n.focus()}),t(document).bind("keyup",function(e){var n;37!=e.keyCode||!e.shiftKey||(n=window.open(function(){var e=t(".issue-index li.current"),n=t(e).prev().find("a");if(0==n.length&&(n=t(e).closest("ul").prevAll(":has(li.article)").find(".article:last a")),0<n.length){var i=t(n).attr("href");return window.location.origin+i}}(),"_self"))&&n.focus()})});