"use strict";var P=function(t,e){return(P=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var U=function(){return(U=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},E;function N(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)!s&&n in e||((s=s||Array.prototype.slice.call(e,0,n))[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function c(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t===e&&s:e.has(t))return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function d(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t===e&&n:e.has(t))return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i;throw new TypeError("Cannot write private member to an object whose class did not declare it")}var t=document.createElement("canvas"),z=(t.width=100,t.height=100,t.getContext("2d")),e=(z.save(),window.adParams||{}),q={VER:"9.18",trkHost:"//"+e.trkHost,DynImgCdnHost:"//"+e.dynImgHost,cdnHost:"//"+e.cdnHost,pxlDims:e.dims,crossOrigin:"true"===(null==(E=e.custom)?void 0:E.exported)?null:"anonymous",view_n:!1,inView:!1,clkCount:0,engageCount:0,initParams:function(){var t;window.adParams&&(q.trkHost="//"+adParams.trkHost,q.DynImgCdnHost="//"+adParams.dynImgHost,q.cdnHost="//"+adParams.cdnHost,q.pxlDims=adParams.dims,q.crossOrigin="true"===(null==(t=adParams.custom)?void 0:t.exported)?null:"anonymous")},initViewability:function(t){q.clinchViewability={};try{q.clinchViewability=new ClinchViewability}catch(t){}try{q.clinchViewability.init(t,1e3)}catch(t){}if(q.clinchViewability._undetermined)q.view_n=!0;else try{q.clinchViewability.listen("viewable.impression",function(t){void 0!==q&&q.reportViewability&&q.reportViewability()})}catch(t){}},reportImp:function(){if(!q.isDisableTrackingPixels()){(new Image).src=q.trkHost+"/imp?"+q.pxlDims+(q.view_n?"&view_n=true":"")+"&a="+Date.now();for(var t=0;t<adParams.impPixels.length;t++){var e=adParams.impPixels[t].replace("http:","").replace("https:","");(new Image).src=q.expandCacheBusterMacroInUrl(e)}}},reportViewability:function(){q.pxlDims&&((new Image).src=q.trkHost+"/view_y?"+q.pxlDims+"&a="+Date.now())},reportClick:function(t,e,i,s,n,r){if(e=e||"",i=i||"",n=n||q.getClkPos(r),q.isVpaid())a=(r=q.getClkPos()).x,r=r.y,vpaidAd.callEvent_("AdClickThru",t,33,!0,e,a,r),q.clkCount++;else if(!(q.isDisableTrackingPixels()||9<q.clkCount)){var a=q.getClickedItem(e),r=q.getClickedItemParameter(a),o=((new Image).src=q.trkHost+"/clk?"+q.pxlDims+"&ctaid="+e+(i?"&utags="+encodeURIComponent(i):"")+"&x="+n.x+"&y="+n.y+"&cnt="+q.clkCount+"&lp="+encodeURIComponent(t)+r+"&a="+Date.now(),[]);if(Array.isArray(adParams.clkPixels))for(var h=0;h<adParams.clkPixels.length;h++)o.push(adParams.clkPixels[h]);if(Array.isArray(s))for(h=0;h<s.length;h++)o.push(s[h]);for(h=0;h<o.length;h++)(new Image).src=q.expandMacrosInClickTrackerUrl(q.expandCacheBusterMacroInUrl(o[h]).replace(/{{click_type}}/g,e).replace(/{{click_tags}}/g,i),e);q.clkCount++}},reportEngage:function(t,e,i,s){if(q.isVpaid())vpaidAd.callEvent_("AdInteraction",t);else if(!q.isDisableTrackingPixels()){(new Image).src=q.trkHost+"/engage?"+q.pxlDims+"&type="+t+(e?"&utags="+encodeURIComponent(e):"")+"&x="+s.x+"&y="+s.y+"&cnt="+q.engageCount+"&a="+Date.now();var n=[];if(Array.isArray(i))for(var r=0;r<i.length;r++)n.push(i[r]);for(r=0;r<n.length;r++)(new Image).src=q.expandCacheBusterMacroInUrl(n[r]).replace(/{{engage_type}}/g,t).replace(/{{engage_tags}}/g,e);q.engageCount++}},reportBlock:function(){q.isDisableTrackingPixels()||q.isBlockEventSent||(q.isBlockEventSent=!0,(new Image).src=q.trkHost+"/blk?"+q.pxlDims+"&a="+Date.now())},errorsSent:{},reportExceptionError:function(t,e){q.reportError("exception_in_"+t,e)},reportError:function(t,e){if(!q.isDisableTrackingPixels())if(void 0!==q.errorsSent[t])q.errorsSent[t]++;else{q.errorsSent[t]=1;if(e)for(var i in e)"function"!=typeof e[i]&&e[i]}},sendEvent:function(t){adParams.isProd},click:function(t,e,i){try{q.cancelBubbling(i),"undefined"!=typeof cp_&&cp_.fire("click",{url:t,type:e,event:i}),!0!==i.stopClickProcess&&(t=(t="default"===t?"":t)||adParams.clickUrl||adParams.fbClickUrl)&&(t=q.genClkChain(t),q.reportClick(t,e,null,null,null,i),q.isVpaid()||(q.isMraid()?q.sendMsgToHost("open,"+t):window.open(t,t.startsWith("tel")?"_top":"_blank")))}catch(i){q.reportExceptionError("click",i)}},expandCacheBusterMacroInUrl:function(t){return t=0<=t.indexOf("{{cache_buster}}")?t.replace(/{{cache_buster}}/g,Date.now()):t},expandMacrosInClickTrackerUrl:function(e,t){try{var i=q.getClickedItem(t);return e=(e=(e=(e=(e=e.replace(/{{clicked_product_id}}/g,i.id)).replace(/{{clicked_product_category}}/g,i.catName||"")).replace(/{{clicked_product_custom1}}/g,i.custom.custom1||"")).replace(/{{clicked_product_custom2}}/g,i.custom.custom2||"")).replace(/{{clicked_product_custom3}}/g,i.custom.custom3||"")}catch(t){return e}},getClickedItem:function(t){return-1<(t=t.toLowerCase()).indexOf("item_")?(t=parseInt(t.replace("item_",""))-1,items[t]):{id:"",catName:"",custom:{}}},getClickedItemParameter:function(t){var e="";return t.id&&(e="&clkItemId="+encodeURIComponent(t.id),t.catName&&(e+="&clkItemCat="+encodeURIComponent(t.catName)),t.custom.custom1&&(e+="&clkItemCustom1="+encodeURIComponent(t.custom.custom1)),t.custom.custom2&&(e+="&clkItemCustom2="+encodeURIComponent(t.custom.custom2)),t.custom.custom3)&&(e+="&clkItemCustom3="+encodeURIComponent(t.custom.custom3)),e},getClkPos:function(t){var e=comp.renderer.domElement.getBoundingClientRect(),i=e.left,s=e.top,n=e.width,e=e.height;try{var r=0,a=0;return((t=t||window.event).clientX||t.clientY)&&(r=Math.round((t.clientX-i)/n*100),a=Math.round((t.clientY-s)/e*100)),{x:r,y:a}}catch(t){return{x:0,y:0}}},genClkChain:function(t){var e,i=t;adParams.utmParams&&!t.startsWith("tel")&&(t=adParams.utmParams,t=-1==i.indexOf("?")?"?"+t:"&"+t,i.includes("#")&&!i.includes("/#/")?(e=i.indexOf("#"),i=i.slice(0,e)+t+i.slice(e)):i+=t);for(var s=adParams.clkTrackers.length-1;0<=s;s--){var n=adParams.clkTrackers[s];if(0<=n.toUpperCase().indexOf("AD.DOUBLECLICK.NET/DDM/TRACKCLK"))i=n+(n.endsWith("?")?"":"?")+i;else{var r=parseInt(adParams.custom.clkenclvl);0==s&&!isNaN(r)||(r=1);for(var a=0;a<r;a++)i=encodeURIComponent(i);i=n+i}}return i},sendMsgToHost:function(t){window.parent&&window.parent.postMessage(t,"*")},getParamByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},isBrowserSupported:function(){return!!(document.createElement("canvas").getContext&&Array.prototype.indexOf&&CSSStyleDeclaration.prototype.getPropertyValue&&Element.prototype.addEventListener)},isIos:function(){return/iPhone|iPod|iPad/i.test(navigator.userAgent)},isIE:function(){return/Trident/i.test(navigator.userAgent)},isIpad:function(){return/iPad/i.test(navigator.userAgent)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},isTablet:function(){return this.isIpad()||this.isAndroid()&&!/Mobile/i.test(navigator.userAgent)},isDesktop:function(){return!this.isMobile()&&!this.isTablet()},isMobile:function(){return/Android|webOS|iPhone|iPod|Blackberry|Windows Phone/i.test(navigator.userAgent)},isMraid:function(){return"true"==q.getParamByName("mraid")||"inapp"==q.getParamByName("env")},isVpaid:function(){return"true"===adParams.custom.isVpaid},isDisableTrackingPixels:function(){return!q.pxlDims||q.isVpaid()},isShowClickAreas:function(){return"true"===q.getParamByName("showclickareas")},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},hashCode:function(t){var e,i=0;if(0!==t.length)for(e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return i},hash64:function(t){for(var e="",i="",s=0;s<t.length;s++)s%2==0?e+=t[s]:i+=t[s];var n=this.hashCode(e),r=this.hashCode(i);return n.toString()+r.toString()},getDynImgUrl:function(t,e,i,s,n){return void 0!==window.devicePixelRatio&&1.3<window.devicePixelRatio&&(e*=2,i*=2),"true"===adParams.custom.exported?t:q.DynImgCdnHost+"/img2/"+adParams.clientEncId+"/"+e+"/"+i+"/"+s+"/"+n+"/?u="+encodeURIComponent(t)},isExtImg:function(t){return-1==t.indexOf(this.cdnHost)},hexToRgb:function(t,e){t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return t?"rgba("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+","+e+")":"rgba(0,0,0,0)"},cancelBubbling:function(t){(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0},htmlEncode:function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp;")},insertAndExecute:function(t,e){t.innerHTML=e;for(var i=0,s=Array.prototype.slice.call(t.getElementsByTagName("script"));i<s.length;i++){var n=s[i],r=document.createElement("script");r.async=!1,n.type&&(r.type=n.type),""!=n.src?r.src=n.src:r.innerHTML=n.innerHTML,document.getElementsByTagName("head")[0].appendChild(r)}},receiveMsg:function(t){var e,i,s,n=t.data;if("blockAd"===n)q.hideAd(),q.reportBlock(),q.sendMsgToReciever(t.source,"adBlocked");else if("showAd"===n)q.showAd(),q.sendMsgToReciever(t.source,"adShown");else if("initSubLoad"===n&&"undefined"!=typeof cp_&&cp_.initSubLoad(),!adParams.isProd||-1!=t.origin.indexOf("//cdn.clinch.co"))if("getDynamicData"===n.type){if(biz){for(var r in biz.custom)biz[r]=biz.custom[r];delete biz.custom}var a={items:items||[],biz:biz||null,style:style,cidEnc:adParams.clientEncId,dynImgCdnHost:adParams.dynImgHost,adFormat:adParams.adFormatStr};q.sendMsgToReciever(t.source,"dynamicData",a)}else"click"===n.type?(t=n.params.type||"",a=n.params.tags||"",i=n.params.clickPixels||n.params.pixels||[],s=null,adParams.InAdclk&&(e=adParams.InAdclk.trkPerLabel[t||"main"])&&e.lp&&(s=e.lp),e=n.params.url||s||adParams.clickUrl||adParams.fbClickUrl,s={x:n.params.x||0,y:n.params.y||0},e=q.genClkChain(e),q.reportClick(e,t,a,i,s),q.isVpaid()||(q.isMraid()?q.sendMsgToHost("open,"+e):window.open(e,e.startsWith("tel")?"_top":"_blank"))):"engage"===n.type&&(t=n.params.type||"",a=n.params.tags||"",i=n.params.clickPixels||n.params.pixels||[],s={x:n.params.x||0,y:n.params.y||0},q.reportEngage(t,a,i,s))},sendMsgToReciever:function(t,e,i){t.postMessage({type:e,params:i},"*")},log:function(t){adParams.isDebug||adParams.custom.isPreview},hideAd:function(){document.body.style.visibility="hidden"},showAd:function(){document.body.style.visibility="visible"},measureCan:t,measureCtx:z,measureText:function(t,e,i,s,n,r,a){var o=q.measureCtx,n=(o.font=q.getCtxFont(n,s,i,e),o.measureText(t).width);return 0!=r&&(s=t.length-1,!0===a&&(s+=1),n+=i*r/1e3*s),n},getCtxFont:function(t,e,i,s){var style="";return 1!==t&&!0!==t&&"italic"!==t||(style+="italic "),(style+=e+" ")+i+"px '"+s+"'"},loadFonts:function(t){var e=cp_.containerDiv.ownerDocument;if(e.fonts&&e.fonts.load){var i=e.createElement("style"),s=adParams.language,n=Array.from(e.fonts).map(function(t){return t.family});e.head.appendChild(i);for(var r=0,a=t;r<a.length;r++){var o=a[r],h=q.getCtxFont(o.italic,o.weight,10,o.family);o.url&&!n.includes(o.family)&&(o='@font-face {font-family: "'.concat(o.family,"\";src: url('").concat(o.url.replace(/\.[^.]+$/,"_".concat(s,".woff2")),"') format('woff2'), url('").concat(o.url.replace(/\.[^.]+$/,"_".concat(s,".woff")),"') format('woff');font-weight: ").concat(o.weight,";font-style: ").concat(o.italic?"italic":"normal",";}"),i.sheet.insertRule(o),e.fonts.load(h))}}},deepEqual:function(e,i,s){var n=this;if("object"==typeof e&&null!==e||e instanceof Float32Array)try{return Object.keys(e).every(function(t){return n.deepEqual(e[t],i[t],s)})}catch(t){return!1}return(e=void 0===e?null:e)===(i=void 0===i?null:i)}},n,r,o,h,l,I,f,O,u,L,m,F,D,H,p,W,v,X,Y,Z,J,Q,$,K,G=(window.FB=q,function(){function t(){var t=this,e=(n.add(this),r.set(this,void 0),o.set(this,void 0),h.set(this,void 0),l.set(this,void 0),I.set(this,void 0),f.set(this,void 0),O.set(this,void 0),u.set(this,void 0),L.set(this,void 0),m.set(this,void 0),F.set(this,void 0),D.set(this,void 0),H.set(this,void 0),p.set(this,void 0),W.set(this,void 0),v.set(this,void 0),X.set(this,void 0),Y.set(this,void 0),Z.set(this,void 0),J.set(this,void 0),Q.set(this,void 0),this._listeners={},d(this,r,0,"f"),d(this,o,0,"f"),d(this,h,0,"f"),d(this,l,0,"f"),d(this,I,0,"f"),d(this,f,0,"f"),d(this,O,null,"f"),d(this,u,0,"f"),d(this,L,!1,"f"),this.isStarted=!1,this.IsPaused=!1,d(this,m,!1,"f"),d(this,F,1,"f"),d(this,D,0,"f"),d(this,H,0,"f"),d(this,p,!1,"f"),this.isMovieEnded=!1,d(this,W,!0,"f"),this.playbackrate=1,d(this,v,null,"f"),this.comp=null,d(this,X,null,"f"),d(this,Y,null,"f"),d(this,Z,0,"f"),d(this,J,{},"f"),"hidden"),i="visibilitychange",s=["moz","ms","webkit"].find(function(t){return void 0!==document["".concat(t,"Hidden")]}),s=(s&&(e="".concat(s,"Hidden"),i="".concat(s).concat(i)),new URLSearchParams(document.location.search));adParams.drawDebugBoxes="true"===s.get("drawDebugBoxes"),document.addEventListener(i,function(){return t.handleVisibilityChange(e)},!1)}return t.prototype.addListener=function(t,e){void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e)},t.prototype.fire=function(t,e){if((t={type:t,obj:e}).target||(t.target=this),!t.type)throw new Error("Event object missing 'type' property.");if(this._listeners[t.type]instanceof Array)for(var i=this._listeners[t.type],s=0,n=i.length;s<n;s++)i[s].call(this,t)},t.prototype.removeListener=function(t,e){if(this._listeners[t]instanceof Array)for(var i=this._listeners[t],s=0,n=i.length;s<n;s++)if(i[s]===e){i.splice(s,1);break}},t.prototype.getStatus=function(){var t=c(this,L,"f")?this.isStarted?this.IsPaused||this.isMovieEnded?this.IsPaused&&!this.isMovieEnded?"paused":"ended":"play":"ready":"init";return{status:t,currentTime:c(this,n,"m",$).call(this),volume:volume,mute:c(this,m,"f")}},t.prototype.Mute=function(t){void 0!==this.comp&&(d(this,m,t,"f"),this.comp.mute(c(this,m,"f")))},t.prototype.isMute=function(){return c(this,m,"f")},t.prototype.Volume=function(t){(t=1<t?1:t)<0&&(t=0),void 0!==this.comp&&(!0===c(this,m,"f")&&0<t&&this.Mute(!1),this.comp.vol(t),d(this,F,t,"f"),0===t&&this.Mute(!0),this.fire("volumeChange",{volume:t}))},t.prototype.report_percentage=function(){var t=this.comp.getFootageStatus(!1),e=(this.firstFrameLoaded||0!==this.comp.getFootageStatus(!0).pending.length||(this.fire("initial_load_completed"),this.firstFrameLoaded=!0),c(this,n,"m",K).call(this,2e4));0!==t.pending.length&&!e||(clearInterval(c(this,X,"f")),0<t.failed.length?q.reportError("footage_failed"):0<t.pending.length&&q.reportError("footage_timeout"),t.failed.length+t.pending.length!==0)||this.MovReady()},t.prototype.MovReady=function(){try{q.log("MovReady() called"),d(this,L,!0,"f"),adParams.autoPlay?(this.start(),this.fire("ready_for_play"),this.fire("play")):(this.fire("ready_for_play"),this.IsPaused=!0)}catch(t){q.reportExceptionError("MovReady_func",t)}},t.prototype.start=function(){var t=this;try{c(this,Q,"f")&&window.clearTimeout(c(this,Q,"f")),this.comp.drawFrame(c(this,f,"f"),!0),d(this,O,setInterval(function(){try{d(t,l,c(t,f,"f")/(1e3*t.comp.dur)*100,"f"),100<c(t,l,"f")&&d(t,l,100,"f"),d(t,I,c(t,l,"f"),"f"),t.IsPaused||t.fire("progress",{time:c(t,n,"m",$).call(t)})}catch(t){}},50),"f"),d(this,u,Date.now(),"f"),this.comp.durationStr_=this.milisecTotime(1e3*this.comp.dur),this.isStarted=!0,this.IsPaused=!1,this.Mute(c(this,m,"f")),this.comp.play(c(this,f,"f")),this.fire("start"),this.animate()}catch(t){q.reportExceptionError("start_func",t)}},t.prototype.movieEnded=function(){this.isMovieEnded=!0,this.Pause(),this.fire("end"),d(this,W,!1,"f")},t.prototype.windowResized=function(){var t,e,i=0,s=0,n=1,r="",a=(this.comp.renderer.setSize(this.comp.w,this.comp.h),this.comp.renderer.domElement.style),o=this.containerDiv.offsetWidth,h=this.containerDiv.offsetHeight,l=(-1!==[9055,8855,8999,9059,9060].indexOf(adParams.campaignId)&&"true"!==adParams.custom.isPreview||o===comp.w&&h===comp.h||(e=comp.w/comp.h,t=o/h,r="top left",l=Math.abs(1-o/comp.w/(h/comp.h))<.01,e<=t&&!l||t<e&&l?(n=h/comp.h,t=comp.w*n,i=0,s=Math.round((o-t)/2)):(n=o/comp.w,e=comp.h*n,s=0,i=Math.round((h-e)/2))),"scale("+n+")");a.WebkitTransform=l,a.MozTransform=l,a.oTransform=l,a.transform=l,a.msTransform=l,a.WebkitTransformOrigin=r,a.MozTransformOrigin=r,a.oTransformOrigin=r,a.transformOrigin=r,a.msTransformOrigin=r,a.top=i+"px",a.left=s+"px",!0===this.IsPaused&&this.comp.drawFrame(c(this,f,"f"),this.IsPaused),this.scale=n,this.fire("resize",n)},t.prototype.animate=function(){var t,e=Date.now();!0===c(this,p,"f")?(d(this,p,!1,"f"),this.isStarted=!1):(!1===this.IsPaused&&null!=this.comp&&(d(this,f,c(this,f,"f")+(e-c(this,u,"f"))*this.playbackrate,"f"),c(this,f,"f")>1e3*this.comp.dur&&d(this,f,1e3*this.comp.dur,"f"),c(this,f,"f")!==1e3*this.comp.dur||this.isMovieEnded||this.movieEnded(),null!=(t=this.comp)&&t.drawFrame(c(this,f,"f"),this.IsPaused),d(this,o,1e3/(e-c(this,u,"f")),"f"),d(this,r,(c(this,r,"f")*c(this,h,"f")+c(this,o,"f"))/(c(this,h,"f")+1),"f"),d(this,h,(t=c(this,h,"f"),++t),"f")),d(this,u,e,"f"),d(this,v,requestAnimationFrame(this.animate.bind(this)),"f"))},t.prototype.Play=function(){this.isStarted?this.isMovieEnded?this.replay():(this.IsPaused=!1,this.comp.play(c(this,f,"f")),this.fire("play")):adParams.autoPlay||this.isStarted||(this.IsPaused=!1,this.start(),this.fire("play"))},t.prototype.Pause=function(){this.IsPaused=!0,this.isMovieEnded||this.fire("pause",{time:c(this,n,"m",$).call(this)}),this.isStarted&&this.comp.pause(c(this,f,"f"),this.isMovieEnded)},t.prototype.GetMovieDuration=function(){if(null!=this.comp)return this.comp.dur},t.prototype.stop=function(){null!=this.comp&&this.comp.stop(),d(this,p,!0,"f")},t.prototype.goTo=function(t){t=Math.min(1e3*this.comp.dur,Math.max(0,t)),d(this,f,t,"f"),this.comp.goTo(t,this.IsPaused),this.fire("goto",{time:c(this,n,"m",$).call(this)})},t.prototype.replay=function(){this.comp.stop(),d(this,u,Date.now(),"f"),d(this,f,0,"f"),this.isMovieEnded=!1,this.Play(),this.fire("play")},t.prototype.TogglePlaybackRate=function(){1===this.playbackrate?(this.playbackrate=.1,this.comp.setRate(.1)):(this.playbackrate=1,this.comp.setRate(1))},t.prototype.handleVisibilityChange=function(t){null!=this.comp&&(document[t]?(q.log("Clinch:hide"),this.fire("hide"),null!=c(this,v,"f")&&cancelAnimationFrame(c(this,v,"f"))):(q.log("Clinch:visible"),this.fire("visible"),d(this,u,Date.now()-30,"f"),null!=c(this,v,"f")?(cancelAnimationFrame(c(this,v,"f")),c(this,f,"f")>=1e3*this.comp.dur?(d(this,f,1e3*this.comp.dur,"f"),q.log("Clinch:drawFrame at:"+c(this,f,"f")),this.comp.goTo(c(this,f,"f"),this.IsPaused),this.comp.drawFrame(c(this,f,"f"),this.IsPaused),this.animate()):!0===this.IsPaused?(q.log("Clinch:drawFrame at:"+c(this,f,"f")),this.comp.goTo(c(this,f,"f"),this.IsPaused),this.comp.drawFrame(c(this,f,"f"),this.IsPaused),this.animate(),this.Pause()):(this.animate(),q.log("Clinch:resume Play at:"+c(this,f,"f")),this.Play(!1))):this.comp.drawFrame(c(this,f,"f"),this.IsPaused)))},t.prototype.currentTime=function(){return c(this,f,"f")},t.prototype.milisecTotime=function(t){var t=Math.floor(t/1e3),e=Math.floor(t/60),t=t-60*e;return e+":"+(t=t<10?"0"+t:t)},t.prototype.drawCurrentFrameInLoop=function(){var t;this.comp.drawFrame(c(this,f,"f"),!0),d(this,D,(t=c(this,D,"f"),++t),"f"),d(this,Q,window.setTimeout(this.drawCurrentFrameInLoop.bind(this),100),"f")},t.prototype.init=function(t,e,i,s){this.firstFrameLoaded=!1,this.footageTiming=e.loadFootageTiming;try{s?(e.custom.isVpaid="true",this.isVpaid=!0,this.options=s,d(this,m,e.isMute||!1===s.videoCanAutoplay,"f")):d(this,m,!0,"f"),"true"===e.custom.startAdHidden&&q.hideAd(),i.setAttribute("compId",this.comp.id),this.containerDiv=i,this.B.COMP.call(this.comp),void 0===e.custom.subLoadDelay?e.subLoadDelay=0:e.subLoadDelay=parseFloat(e.custom.subLoadDelay),this.containerDiv.appendChild(this.comp.renderer.domElement);var n=e.format.w,r=e.format.h,a=(null===style||void 0===style?void 0:style.Background_framecolor)||(null===style||void 0===style?void 0:style.frame_color)||"#B3B3B3",o=this.comp.renderer.domElement,h=(o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.cursor="pointer",o.style.overflow="hidden",o.style.width=n+"px",o.style.height=r+"px",'<div style="position:absolute;z-index:100000;background:'+a+';top:0;left:0;width:100%;height:1px"></div><div style="position:absolute;z-index:100000;background:'+a+';bottom:0;left:0;width:100%;height:1px"></div><div style="position:absolute;z-index:100000;background:'+a+';top:0;left:0;width:1px;height:100%"></div><div style="position:absolute;z-index:100000;background:'+a+';top:0;right:0;width:1px;height:100%"></div>'),l=o,c=h,u=document.createElement("div");c=c.trim(),u.innerHTML=c;for(var p=u.childNodes.length-1;0<=p;p--)l.appendChild(u.childNodes[p]);window.addEventListener("resize",this.windowResized.bind(this)),e.isProd||i.addEventListener("contextmenu",this.TogglePlaybackRate),this.windowResized.bind(this)(),this.containerDiv.addEventListener("click",function(t){return q.click(null,"default",t),!1}),d(this,f,1e3*e.startTime,"f"),this.drawCurrentFrameInLoop(),d(this,Y,new Date,"f"),d(this,X,setInterval(this.report_percentage.bind(this),100),"f"),this.fire("init")}catch(t){q.reportExceptionError("Init",{adParams:JSON.stringify(e),stage:"",exception:JSON.stringify(t)})}},t.prototype.dispose=function(){if(this.containerDiv.innerHTML="",this.comp){comp.footage=null;for(var t=0;t<this.comp.l.length;t++)this.comp.l[t].dispose&&this.comp.l[t].dispose()}this.comp=null},t}()),r=new WeakMap,o=new WeakMap,h=new WeakMap,l=new WeakMap,I=new WeakMap,f=new WeakMap,O=new WeakMap,u=new WeakMap,L=new WeakMap,m=new WeakMap,F=new WeakMap,D=new WeakMap,H=new WeakMap,p=new WeakMap,W=new WeakMap,v=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,J=new WeakMap,Q=new WeakMap,n=new WeakSet,$=function(){return c(this,f,"f")/1e3},K=function(t){return(new Date).getTime()-c(this,Y,"f").getTime()>t},tt=function(){function t(t,e){this.dimensions=t;for(var i=0;i<e.length;i++)this[this.dimensions[i]]=e[i]||0}return t.prototype.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0;i<t.length;i++)this[this.dimensions[i]]=t[i];return this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.copy=function(e){var i=this;return this.dimensions.forEach(function(t){i[t]=e[t]}),this},t.prototype.add=function(e,t){var i=this;return void 0!==t?this.addVectors(e,t):(this.dimensions.forEach(function(t){i[t]+=e[t]}),this)},t.prototype.addVectors=function(e,i){var s=this;return this.dimensions.forEach(function(t){s[t]=e[t]+i[t]}),this},t.prototype.sub=function(e,t){var i=this;return void 0!==t?this.subVectors(e,t):(this.dimensions.forEach(function(t){i[t]-=e[t]}),this)},t.prototype.subVectors=function(e,i){var s=this;return this.dimensions.forEach(function(t){s[t]=e[t]-i[t]}),this},t.prototype.multiply=function(e,t){var i=this;return void 0!==t?this.multiplyVectors(e,t):(this.dimensions.forEach(function(t){return i[t]*=e[t]}),this)},t.prototype.multiplyVectors=function(e,i){var s=this;return this.dimensions.forEach(function(t){return s[t]=e[t]*i[t]}),this},t.prototype.multiplyScalar=function(e){var i=this;return this.dimensions.forEach(function(t){i[t]*=e}),this},t.prototype.divide=function(e){var i=this;return this.dimensions.forEach(function(t){return i[t]/=e[t]}),this},t.prototype.divideScalar=function(e){var i=this;return 0!==e?this.dimensions.forEach(function(t){i[t]/=e}):this.dimensions.forEach(function(t){i[t]=0}),this},t.prototype.min=function(e){var i=this;return this.dimensions.forEach(function(t){i[t]=Math.min(i[t],e[t])}),this},t.prototype.max=function(e){var i=this;return this.dimensions.forEach(function(t){i[t]=Math.max(i[t],e[t])}),this},t.prototype.negate=function(){return this.multiplyScalar(-1)},t.prototype.dot=function(i){var s=this;return this.dimensions.reduce(function(t,e){return t+s[e]*i[e]},0)},t.prototype.lengthSq=function(){var i=this;return this.dimensions.reduce(function(t,e){return t+Math.pow(i[e],2)},0)},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.normalize=function(){return this.divideScalar(this.length())},t.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},t.prototype.distanceToSquared=function(t){return this.lengthSq(this.clone().sub(t))},t.prototype.lerp=function(e,i){var s=this;return this.dimensions.forEach(function(t){return s[t]=(e[t]-s[t])*i}),this},t.prototype.equals=function(e){var i=this;return this.dimensions.every(function(t){return i[t]===e[t]})},t.prototype.clone=function(){var e=this;return new t(this.dimensions,this.dimensions.map(function(t){return e[t]}))},t}(),et=function(n){function t(t,e,i,s){t=n.call(this,["x","y","z","w"],[t,e,i,s])||this;return t.w=void 0!==s?s:1,t}return a(t,n),t.prototype.applyMatrix4=function(t){var e=this.x,i=this.y,s=this.z,n=this.w,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*s+t[12]*n,this.y=t[1]*e+t[5]*i+t[9]*s+t[13]*n,this.z=t[2]*e+t[6]*i+t[10]*s+t[14]*n,this.w=t[3]*e+t[7]*i+t[11]*s+t[15]*n,this},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t}(tt),it=function(i){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.call(this,["x","y"],t)||this}return a(t,i),t.prototype.applyMatrix3=function(t){var e=this.x,i=this.y,t=t.elements;return this.x=e*t[0]+i*t[3]+t[6],this.y=e*t[1]+i*t[4]+t[7],this},t.prototype.clone=function(){return new t(this.x,this.y)},t}(tt),g=function(i){function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.call(this,["x","y","z"],t)||this}return a(s,i),s.prototype.applyMatrix4=function(t){var e=this.x,i=this.y,s=this.z,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*s+t[12],this.y=t[1]*e+t[5]*i+t[9]*s+t[13],this.z=t[2]*e+t[6]*i+t[10]*s+t[14],this},s.prototype.applyQuaternion=function(t){var e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,a=t.z,t=t.w,o=t*e+r*s-a*i,h=t*i+a*e-n*s,l=t*s+n*i-r*e,e=-n*e-r*i-a*s;return this.x=o*t+e*-n+h*-a-l*-r,this.y=h*t+e*-r+l*-n-o*-a,this.z=l*t+e*-a+o*-r-h*-n,this},s.prototype.cross=function(t,e){var i,s;return void 0!==e?this.crossVectors(t,e):(e=this.x,i=this.y,s=this.z,this.x=i*t.z-s*t.y,this.y=s*t.x-e*t.z,this.z=e*t.y-i*t.x,this)},s.prototype.crossVectors=function(t,e){var i=t.x,s=t.y,t=t.z,n=e.x,r=e.y,e=e.z;return this.x=s*e-t*r,this.y=t*n-i*e,this.z=i*r-s*n,this},s.prototype.setFromMatrixPosition=function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},s.prototype.setFromMatrixScale=function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),t=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=i,this.z=t,this},s.prototype.clone=function(){return new s(this.x,this.y,this.z)},s.prototype.projectOnVector=function(t){var e=new s,t=(e.copy(t).normalize(),this.dot(e));return this.copy(e).multiplyScalar(t)},s.prototype.reflect=function(t){var e=new s;return e.copy(this).projectOnVector(t).multiplyScalar(2),this.subVectors(e,this)},s}(tt),st=function(){function n(t,e,i,s){this._x=t||0,this._y=e||0,this._z=i||0,this._order=s||n.DefaultOrder,this._quaternion=void 0}return n.prototype._updateQuaternion=function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._updateQuaternion()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._updateQuaternion()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._updateQuaternion()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t,this._updateQuaternion()},enumerable:!1,configurable:!0}),n.prototype.set=function(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._order=s||this._order,this._updateQuaternion(),this},n.prototype.copy=function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._updateQuaternion(),this},n.prototype.setFromRotationMatrix=function(t,e){function i(t){return Math.min(Math.max(t,-1),1)}var t=t.elements,s=t[0],n=t[4],r=t[8],a=t[1],o=t[5],h=t[9],l=t[2],c=t[6],t=t[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(r)),Math.abs(r)<.99999?(this._x=Math.atan2(-h,t),this._z=Math.atan2(-n,s)):(this._x=Math.atan2(c,o),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h)),Math.abs(h)<.99999?(this._y=Math.atan2(r,t),this._z=Math.atan2(a,o)):(this._y=Math.atan2(-l,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(c)),Math.abs(c)<.99999?(this._y=Math.atan2(-l,t),this._z=Math.atan2(-n,o)):(this._y=0,this._z=Math.atan2(a,s))):"ZYX"===e?(this._y=Math.asin(-i(l)),Math.abs(l)<.99999?(this._x=Math.atan2(c,t),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-n,o))):"YZX"===e?(this._z=Math.asin(i(a)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,o),this._y=Math.atan2(-l,s)):(this._x=0,this._y=Math.atan2(r,t))):"XZY"===e&&(this._z=Math.asin(-i(n)),Math.abs(n)<.99999?(this._x=Math.atan2(c,o),this._y=Math.atan2(r,s)):(this._x=Math.atan2(-h,t),this._y=0)),this._order=e,this._updateQuaternion(),this},n.prototype.setFromQuaternion=function(t,e,i){function s(t){return Math.min(Math.max(t,-1),1)}var n=t.x*t.x,r=t.y*t.y,a=t.z*t.z,o=t.w*t.w;return"XYZ"===(e=e||this._order)?(this._x=Math.atan2(2*(t.x*t.w-t.y*t.z),o-n-r+a),this._y=Math.asin(s(2*(t.x*t.z+t.y*t.w))),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),o+n-r-a)):"YXZ"===e?(this._x=Math.asin(s(2*(t.x*t.w-t.y*t.z))),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),o-n-r+a),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),o-n+r-a)):"ZXY"===e?(this._x=Math.asin(s(2*(t.x*t.w+t.y*t.z))),this._y=Math.atan2(2*(t.y*t.w-t.z*t.x),o-n-r+a),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),o-n+r-a)):"ZYX"===e?(this._x=Math.atan2(2*(t.x*t.w+t.z*t.y),o-n-r+a),this._y=Math.asin(s(2*(t.y*t.w-t.x*t.z))),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),o+n-r-a)):"YZX"===e?(this._x=Math.atan2(2*(t.x*t.w-t.z*t.y),o-n+r-a),this._y=Math.atan2(2*(t.y*t.w-t.x*t.z),o+n-r-a),this._z=Math.asin(s(2*(t.x*t.y+t.z*t.w)))):"XZY"===e&&(this._x=Math.atan2(2*(t.x*t.w+t.y*t.z),o-n+r-a),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),o+n-r-a),this._z=Math.asin(s(2*(t.z*t.w-t.x*t.y)))),this._order=e,!1!==i&&this._updateQuaternion(),this},n.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},n.prototype.clone=function(){return new n(this._x,this._y,this._z,this._order)},n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n.DefaultOrder="XYZ",n}(),nt=function(){function e(t,e,i,s,n,r,a,o,h){try{this.elements=new Float32Array(9)}catch(t){this.elements=new Array(9)}this.set(void 0!==t?t:1,e||0,i||0,s||0,void 0!==n?n:1,r||0,a||0,o||0,void 0!==h?h:1)}return e.prototype.set=function(t,e,i,s,n,r,a,o,h){var l=this.elements;return l[0]=t,l[3]=e,l[6]=i,l[1]=s,l[4]=n,l[7]=r,l[2]=a,l[5]=o,l[8]=h,this},e.prototype.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},e.prototype.copy=function(t){t=t.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},e.prototype.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},e.prototype.determinant=function(){var t=this.elements,e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],a=t[5],o=t[6],h=t[7],t=t[8];return e*r*t-e*a*h-i*n*t+i*a*o+s*n*h-s*r*o},e.prototype.getInverse=function(t,e){var t=t.elements,i=this.elements,t=(i[0]=t[10]*t[5]-t[6]*t[9],i[1]=-t[10]*t[1]+t[2]*t[9],i[2]=t[6]*t[1]-t[2]*t[5],i[3]=-t[10]*t[4]+t[6]*t[8],i[4]=t[10]*t[0]-t[2]*t[8],i[5]=-t[6]*t[0]+t[2]*t[4],i[6]=t[9]*t[4]-t[5]*t[8],i[7]=-t[9]*t[0]+t[1]*t[8],i[8]=t[5]*t[0]-t[1]*t[4],t[0]*i[0]+t[1]*i[3]+t[2]*i[6]);if(0==t){if(e)throw new Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity()}else this.multiplyScalar(1/t);return this},e.prototype.transpose=function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},e.prototype.clone=function(){var t=this.elements;return new e(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},e.prototype.rotate=function(){},e.prototype.translate=function(){},e.prototype.scale=function(){},e.prototype.skew=function(){},e}(),y={PI2:2*Math.PI,generateUUID:function(){var e,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=new Array(36),n=0;return function(){for(var t=0;t<36;t++)8==t||13==t||18==t||23==t?s[t]="-":14==t?s[t]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,s[t]=i[19==t?3&e|8:e]);return s.join("")}}(),clamp:function(t,e,i){return t<e?e:i<t?i:t},clampBottom:function(t,e){return t<e?e:t},mapLinear:function(t,e,i,s,n){return s+(t-e)*(n-s)/(i-e)},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},sign:function(t){return t<0?-1:0<t?1:0},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}()},i=function(){function l(t,e,i,s,n,r,a,o,h,l,c,u,p,d,f,m){try{this.elements=new Float32Array(16)}catch(t){this.elements=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}var v=this.elements;v[0]=void 0!==t?t:1,v[4]=e||0,v[8]=i||0,v[12]=s||0,v[1]=n||0,v[5]=void 0!==r?r:1,v[9]=a||0,v[13]=o||0,v[2]=h||0,v[6]=l||0,v[10]=void 0!==c?c:1,v[14]=u||0,v[3]=p||0,v[7]=d||0,v[11]=f||0,v[15]=void 0!==m?m:1}return l.prototype.get=function(t,e){return this.elements[4*t+e]},l.prototype.set=function(t,e,i,s,n,r,a,o,h,l,c,u,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=s,v[1]=n,v[5]=r,v[9]=a,v[13]=o,v[2]=h,v[6]=l,v[10]=c,v[14]=u,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},l.prototype.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},l.prototype.copy=function(e){try{this.elements.set(e.elements)}catch(t){this.elements=e.elements.slice(0,e.elements.length-1)}return this},l.prototype.copyPosition=function(t){var e=this.elements,t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},l.prototype.extractRotation=function(t){var e=new g,i=this.elements,t=t.elements,s=1/e.set(t[0],t[1],t[2]).length(),n=1/e.set(t[4],t[5],t[6]).length(),e=1/e.set(t[8],t[9],t[10]).length();return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[4]=t[4]*n,i[5]=t[5]*n,i[6]=t[6]*n,i[8]=t[8]*e,i[9]=t[9]*e,i[10]=t[10]*e,this},l.prototype.makeRotationFromQuaternion=function(t){var e=this.elements,i=t.x,s=t.y,n=t.z,t=t.w,r=i+i,a=s+s,o=n+n,h=i*r,l=i*a,i=i*o,c=s*a,s=s*o,n=n*o,r=t*r,a=t*a,t=t*o;return e[0]=1-(c+n),e[4]=l-t,e[8]=i+a,e[1]=l+t,e[5]=1-(h+n),e[9]=s-r,e[2]=i-a,e[6]=s+r,e[10]=1-(h+c),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},l.prototype.lookAt=function(t,e,i){var s=new g,n=new g,r=new g,a=this.elements;return r.subVectors(t,e).normalize(),0===r.length()&&(r.z=1),s.crossVectors(i,r).normalize(),0===s.length()&&(r.x+=1e-4,s.crossVectors(i,r).normalize()),n.crossVectors(r,s),a[0]=s.x,a[4]=n.x,a[8]=r.x,a[1]=s.y,a[5]=n.y,a[9]=r.y,a[2]=s.z,a[6]=n.z,a[10]=r.z,this},l.prototype.multiply=function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},l.prototype.multiplyMatrices=function(t,e){var t=t.elements,e=e.elements,i=this.elements,s=t[0],n=t[4],r=t[8],a=t[12],o=t[1],h=t[5],l=t[9],c=t[13],u=t[2],p=t[6],d=t[10],f=t[14],m=t[3],v=t[7],g=t[11],t=t[15],y=e[0],x=e[4],w=e[8],_=e[12],b=e[1],M=e[5],T=e[9],k=e[13],C=e[2],S=e[6],P=e[10],E=e[14],z=e[3],I=e[7],A=e[11],e=e[15];return i[0]=s*y+n*b+r*C+a*z,i[4]=s*x+n*M+r*S+a*I,i[8]=s*w+n*T+r*P+a*A,i[12]=s*_+n*k+r*E+a*e,i[1]=o*y+h*b+l*C+c*z,i[5]=o*x+h*M+l*S+c*I,i[9]=o*w+h*T+l*P+c*A,i[13]=o*_+h*k+l*E+c*e,i[2]=u*y+p*b+d*C+f*z,i[6]=u*x+p*M+d*S+f*I,i[10]=u*w+p*T+d*P+f*A,i[14]=u*_+p*k+d*E+f*e,i[3]=m*y+v*b+g*C+t*z,i[7]=m*x+v*M+g*S+t*I,i[11]=m*w+v*T+g*P+t*A,i[15]=m*_+v*k+g*E+t*e,this},l.prototype.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},l.prototype.determinant=function(){var t=this.elements,e=t[0],i=t[4],s=t[8],n=t[12],r=t[1],a=t[5],o=t[9],h=t[13],l=t[2],c=t[6],u=t[10],p=t[14];return t[3]*(+n*o*c-s*h*c-n*a*u+i*h*u+s*a*p-i*o*p)+t[7]*(+e*o*p-e*h*u+n*r*u-s*r*p+s*h*l-n*o*l)+t[11]*(+e*h*c-e*a*p-n*r*c+i*r*p+n*a*l-i*h*l)+t[15]*(-s*a*l-e*o*c+e*a*u+s*r*c-i*r*u+i*o*l)},l.prototype.transpose=function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},l.prototype.setPosition=function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},l.prototype.getInverse=function(t,e){var i=this.elements,t=(t=void 0===t?this:t).elements,s=t[0],n=t[4],r=t[8],a=t[12],o=t[1],h=t[5],l=t[9],c=t[13],u=t[2],p=t[6],d=t[10],f=t[14],m=t[3],v=t[7],g=t[11],t=t[15],t=(i[0]=l*f*v-c*d*v+c*p*g-h*f*g-l*p*t+h*d*t,i[4]=a*d*v-r*f*v-a*p*g+n*f*g+r*p*t-n*d*t,i[8]=r*c*v-a*l*v+a*h*g-n*c*g-r*h*t+n*l*t,i[12]=a*l*p-r*c*p-a*h*d+n*c*d+r*h*f-n*l*f,i[1]=c*d*m-l*f*m-c*u*g+o*f*g+l*u*t-o*d*t,i[5]=r*f*m-a*d*m+a*u*g-s*f*g-r*u*t+s*d*t,i[9]=a*l*m-r*c*m-a*o*g+s*c*g+r*o*t-s*l*t,i[13]=r*c*u-a*l*u+a*o*d-s*c*d-r*o*f+s*l*f,i[2]=h*f*m-c*p*m+c*u*v-o*f*v-h*u*t+o*p*t,i[6]=a*p*m-n*f*m-a*u*v+s*f*v+n*u*t-s*p*t,i[10]=n*c*m-a*h*m+a*o*v-s*c*v-n*o*t+s*h*t,i[14]=a*h*u-n*c*u-a*o*p+s*c*p+n*o*f-s*h*f,i[3]=l*p*m-h*d*m-l*u*v+o*d*v+h*u*g-o*p*g,i[7]=n*d*m-r*p*m+r*u*v-s*d*v-n*u*g+s*p*g,i[11]=r*h*m-n*l*m-r*o*v+s*l*v+n*o*g-s*h*g,i[15]=n*l*u-r*h*u+r*o*p-s*l*p-n*o*d+s*h*d,s*i[0]+o*i[4]+u*i[8]+m*i[12]);if(0==t){if(e)throw new Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity()}else this.multiplyScalar(1/t);return this},l.prototype.translate=function(t){var e=this.elements;return e[12]+=t.x,e[13]+=t.y,e[14]+=t.z,this},l.prototype.rotateX=function(t){},l.prototype.rotateY=function(t){},l.prototype.rotateZ=function(t){t=new l(Math.cos(t),-Math.sin(t),0,0,Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1);return this.multiply(t)},l.prototype.scale=function(t){var e=this.elements,i=t.x,s=t.y,t=t.z;return e[0]*=i,e[4]*=s,e[8]*=t,e[1]*=i,e[5]*=s,e[9]*=t,e[2]*=i,e[6]*=s,e[10]*=t,e[3]*=i,e[7]*=s,e[11]*=t,this},l.prototype.compose=function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},l.prototype.decompose=function(t,e,i){var s=new g,n=new l,r=this.elements,a=s.set(r[0],r[1],r[2]).length(),o=s.set(r[4],r[5],r[6]).length(),s=s.set(r[8],r[9],r[10]).length(),t=(t.x=r[12],t.y=r[13],t.z=r[14],n.elements.set(this.elements),1/a),r=1/o,h=1/s;return n.elements[0]*=t,n.elements[1]*=t,n.elements[2]*=t,n.elements[4]*=r,n.elements[5]*=r,n.elements[6]*=r,n.elements[8]*=h,n.elements[9]*=h,n.elements[10]*=h,e.setFromRotationMatrix(n),i.x=a,i.y=o,i.z=s,this},l.prototype.makeFrustum=function(t,e,i,s,n,r){var a=this.elements,o=2*n/(s-i),h=(e+t)/(e-t),s=(s+i)/(s-i),i=-(r+n)/(r-n),r=-2*r*n/(r-n);return a[0]=2*n/(e-t),a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=o,a[9]=s,a[13]=0,a[2]=0,a[6]=0,a[10]=i,a[14]=r,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},l.prototype.makePerspective=function(t,e,i,s){var t=i*Math.tan(y.degToRad(.5*t)),n=-t;return this.makeFrustum(n*e,t*e,n,t,i,s)},l.prototype.clone=function(){var t=this.elements;return new l(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])},l}(),rt=function(){function t(t,e,i,s){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==s?s:1,this._euler=void 0}return t.prototype._updateEuler=function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._updateEuler()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._updateEuler()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._updateEuler()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._w},set:function(t){this._w=t,this._updateEuler()},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._updateEuler(),this},t.prototype.copy=function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._updateEuler(),this},t.prototype.setFromEuler=function(t,e){var i,s,n,r,a,o;if(t instanceof st)return i=Math.cos(t._x/2),s=Math.cos(t._y/2),n=Math.cos(t._z/2),r=Math.sin(t._x/2),a=Math.sin(t._y/2),o=Math.sin(t._z/2),"XYZ"===t.order?(this._x=r*s*n+i*a*o,this._y=i*a*n-r*s*o,this._z=i*s*o+r*a*n,this._w=i*s*n-r*a*o):"YXZ"===t.order?(this._x=r*s*n+i*a*o,this._y=i*a*n-r*s*o,this._z=i*s*o-r*a*n,this._w=i*s*n+r*a*o):"ZXY"===t.order?(this._x=r*s*n-i*a*o,this._y=i*a*n+r*s*o,this._z=i*s*o+r*a*n,this._w=i*s*n-r*a*o):"ZYX"===t.order?(this._x=r*s*n-i*a*o,this._y=i*a*n+r*s*o,this._z=i*s*o-r*a*n,this._w=i*s*n+r*a*o):"YZX"===t.order?(this._x=r*s*n+i*a*o,this._y=i*a*n+r*s*o,this._z=i*s*o-r*a*n,this._w=i*s*n-r*a*o):"XZY"===t.order&&(this._x=r*s*n-i*a*o,this._y=i*a*n-r*s*o,this._z=i*s*o+r*a*n,this._w=i*s*n+r*a*o),!1!==e&&this._updateEuler(),this;throw new Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.")},t.prototype.setFromAxisAngle=function(t,e){var e=e/2,i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this._updateEuler(),this},t.prototype.setFromRotationMatrix=function(t){var e,t=t.elements,i=t[0],s=t[4],n=t[8],r=t[1],a=t[5],o=t[9],h=t[2],l=t[6],t=t[10],c=i+a+t;return 0<c?(e=.5/Math.sqrt(c+1),this._w=.25/e,this._x=(l-o)*e,this._y=(n-h)*e,this._z=(r-s)*e):a<i&&t<i?(e=2*Math.sqrt(1+i-a-t),this._w=(l-o)/e,this._x=.25*e,this._y=(s+r)/e,this._z=(n+h)/e):t<a?(e=2*Math.sqrt(1+a-i-t),this._w=(n-h)/e,this._x=(s+r)/e,this._y=.25*e,this._z=(o+l)/e):(e=2*Math.sqrt(1+t-i-a),this._w=(r-s)/e,this._x=(n+h)/e,this._y=(o+l)/e,this._z=.25*e),this._updateEuler(),this},t.prototype.inverse=function(){return this.conjugate().normalize(),this},t.prototype.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._updateEuler(),this},t.prototype.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this},t.prototype.multiply=function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},t.prototype.multiplyQuaternions=function(t,e){var i=t._x,s=t._y,n=t._z,t=t._w,r=e._x,a=e._y,o=e._z,e=e._w;return this._x=i*e+t*r+s*o-n*a,this._y=s*e+t*a+n*r-i*o,this._z=n*e+t*o+i*a-s*r,this._w=t*e-i*r-s*a-n*o,this._updateEuler(),this},t.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},t.prototype.slerp=function(t,e){var i,s=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+s*t._x+n*t._y+r*t._z;return o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o?(this._w=a,this._x=s,this._y=n,this._z=r):(t=Math.acos(o),o=Math.sqrt(1-o*o),Math.abs(o)<.001?(this._w=.5*(a+this._w),this._x=.5*(s+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z)):(i=Math.sin((1-e)*t)/o,e=Math.sin(e*t)/o,this._w=a*i+this._w*e,this._x=s*i+this._x*e,this._y=n*i+this._y*e,this._z=r*i+this._z*e,this._updateEuler())),this},t.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._w)},t.prototype.slerp=function(t,e,i,s){return i.copy(t).slerp(e,s)},t}(),at=function(){function e(){}return e.prototype.apply=function(t){t.addEventListener=e.prototype.addEventListener,t.hasEventListener=e.prototype.hasEventListener,t.removeEventListener=e.prototype.removeEventListener,t.dispatchEvent=e.prototype.dispatchEvent},e.prototype.addEventListener=function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},e.prototype.hasEventListener=function(t,e){var i;return void 0!==this._listeners&&void 0!==(i=this._listeners)[t]&&-1!==i[t].indexOf(e)},e.prototype.removeEventListener=function(t,e){var i;void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(i=t.indexOf(e))&&t.splice(i,1)},e.prototype.dispatchEvent=function(t){var e=[];if(void 0!==this._listeners){var i=this._listeners[t.type];if(void 0!==i){t.target=this;for(var s=i.length,n=0;n<s;n++)e[n]=i[n];for(n=0;n<s;n++)e[n].call(this,t)}}},e}(),ot=function(e){function n(){var t=e.call(this)||this;return t.id=n.Object3DIdCount++,t.uuid=y.generateUUID(),t.name="",t.parent=void 0,t.children=[],t.up=new g(0,1,0),t.position=new g,t._rotation=new st,t._quaternion=new rt,t.scale=new g(1,1,1),t._rotation._quaternion=t.quaternion,t._quaternion._euler=t.rotation,t.renderDepth=null,t.rotationAutoUpdate=!0,t.matrix=new i,t.matrixWorld=new i,t.matrixAutoUpdate=!0,t.matrixWorldNeedsUpdate=!0,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.userData={},t}return a(n,e),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._rotation._quaternion=this._quaternion,this._quaternion._euler=this._rotation,this._rotation._updateQuaternion()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"quaternion",{get:function(){return this._quaternion},set:function(t){this._quaternion=t,this._quaternion._euler=this._rotation,this._rotation._quaternion=this._quaternion,this._quaternion._updateEuler()},enumerable:!1,configurable:!0}),n.prototype.rotateOnAxis=function(t,e){var i=new rt;return i.setFromAxisAngle(t,e),this.quaternion.multiply(i),this},n.prototype.rotateX=function(t){var e=new g(1,0,0);return this.rotateOnAxis(e,t)},n.prototype.rotateY=function(t){var e=new g(0,1,0);return this.rotateOnAxis(e,t)},n.prototype.rotateZ=function(t){var e=new g(0,0,1);return this.rotateOnAxis(e,t)},n.prototype.translateOnAxis=function(t,e){var i=new g;return i.copy(t),i.applyQuaternion(this.quaternion),this.position.add(i.multiplyScalar(e)),this},n.prototype.translate=function(t,e){return this.translateOnAxis(e,t)},n.prototype.translateX=function(t){var e=new g(1,0,0);return this.translateOnAxis(e,t)},n.prototype.translateY=function(t){var e=new g(0,1,0);return this.translateOnAxis(e,t)},n.prototype.translateZ=function(t){var e=new g(0,0,1);return this.translateOnAxis(e,t)},n.prototype.localToWorld=function(t){return t.applyMatrix4(this.matrixWorld)},n.prototype.worldToLocal=function(t){var e=new i;return t.applyMatrix4(e.getInverse(this.matrixWorld))},n.prototype.lookAt=function(t){var e=new i;e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)},n.prototype.add=function(t){if(t!==this&&t instanceof n){void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t);for(var e=this;void 0!==e.parent;)e=e.parent;(null==e?void 0:e.__addObject)instanceof Function&&e.__addObject(t)}},n.prototype.remove=function(t){var e=this.children.indexOf(t);if(-1!==e){t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(e,1);for(var i=this;void 0!==i.parent;)i=i.parent;(null==i?void 0:i.__addObject)instanceof Function&&i.__removeObject(t)}},n.prototype.traverse=function(t){t(this);for(var e=0,i=this.children.length;e<i;e++)this.children[e].traverse(t)},n.prototype.getObjectById=function(t,e){for(var i=0,s=this.children.length;i<s;i++){var n=this.children[i];if(n.id===t)return n;if(!0===e&&void 0!==(n=n.getObjectById(t,e)))return n}},n.prototype.getObjectByName=function(t,e){for(var i=0,s=this.children.length;i<s;i++){var n=this.children[i];if(n.name===t)return n;if(!0===e&&void 0!==(n=n.getObjectByName(t,e)))return n}},n.prototype.getChildByName=function(t,e){return this.getObjectByName(t,e)},n.prototype.getDescendants=function(t){void 0===t&&(t=[]),Array.prototype.push.apply(t,this.children);for(var e=0,i=this.children.length;e<i;e++)this.children[e].getDescendants(t);return t},n.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},n.prototype.updateMatrixWorld=function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=0,i=this.children.length;e<i;e++)this.children[e].updateMatrixWorld(t)},n.prototype.clone=function(t,e){if(void 0===e&&(e=!0),(t=void 0===t?new n:t).name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.renderDepth=this.renderDepth,t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),!0===e)for(var i=0;i<this.children.length;i++){var s=this.children[i];t.add(s.clone())}return t},n.Object3DIdCount=0,n}(at),ht=function(e){function t(){var t=e.call(this)||this;return t.matrixWorldInverse=new i,t.projectionMatrix=new i,t.projectionMatrixInverse=new i,t}return a(t,e),t.prototype.lookAt=function(t){t=(new i).lookAt(this.position,t,this.up);this.quaternion.setFromRotationMatrix(t)},t}(ot),lt=function(r){function t(t,e,i,s){var n=r.call(this)||this;return n.fov=void 0!==t?t:50,n.aspect=void 0!==e?e:1,n.near=void 0!==i?i:.1,n.far=void 0!==s?s:2e3,n.updateProjectionMatrix(),n}return a(t,r),t.prototype.updateProjectionMatrix=function(){var t,e,i,s;this.fullWidth?(e=(i=this.fullWidth/this.fullHeight)*(s=-(t=Math.tan(y.degToRad(.5*this.fov))*this.near)),i=Math.abs(i*t-e),s=Math.abs(t-s),this.projectionMatrix.makeFrustum(e+this.x*i/this.fullWidth,e+(this.x+this.width)*i/this.fullWidth,t-(this.y+this.height)*s/this.fullHeight,t-this.y*s/this.fullHeight,this.near,this.far)):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},t}(ht),ct=function(e){function t(){var t=e.call(this)||this;return t.fog=null,t.overrideMaterial=null,t.overrideMaterial=null,t.autoUpdate=!0,t.matrixAutoUpdate=!1,t.__lights=[],t.__objectsAdded=[],t.__objectsRemoved=[],t}return a(t,e),t.prototype.__addObject=function(t){var e;t instanceof ht||(this.__objectsAdded.push(t),-1!==(e=this.__objectsRemoved.indexOf(t))&&this.__objectsRemoved.splice(e,1));for(var i=0;i<t.children.length;i++)this.__addObject(t.children[i])},t.prototype.__removeObject=function(t){var e;t instanceof ht||(this.__objectsRemoved.push(t),-1!==(e=this.__objectsAdded.indexOf(t))&&this.__objectsAdded.splice(e,1));for(var i=0;i<t.children.length;i++)this.__removeObject(t.children[i])},t}(ot),ut=function(i){function t(t){var e=i.call(this)||this;return e.element=t,e.element.style.position="absolute",e.addEventListener("removed",function(t){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)}),e}return a(t,i),t}(ot),pt=function(){function t(){}return t.prototype.load=function(t,e,i,s){var n=document.createElement("img");return void 0!==e&&n.addEventListener("load",function(t){e(this)},!1),void 0!==i&&n.addEventListener("progress",function(t){i(t)},!1),void 0!==s&&n.addEventListener("error",function(t){s(t)},!1),void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),n.src=t,n},t.prototype.setCrossOrigin=function(t){this.crossOrigin=t},t}(),dt=function(){function t(t){this._preserve3d=void 0===(t=t||{}).preserve3d||t.preserve3d,this._preserve3d=!1,this.sortObjects=void 0===t.sortObjects||t.sortObjects,this._width=t.w||0,this._height=t.h||0,this._fov=0,this.matrix=new i,this.matrix_1=new i,(this._scope=this).cache={camera:{fov:0,style:""},objects:{}};var t=t.div&&"DIV"===t.div.nodeName?t.div:document.createElement("div"),e=(t.style.overflow="hidden",t.className="domElement innerContainer",this.domElement=t,document.createElement("div"));e.style.cssText="position:absolute;z-index:-1;",e.className="cameraElement",this.cameraElement=e,this.preserve3d=this._preserve3d,t.appendChild(e)}return t.prototype.renderObject=function(t,e){var style,i,s;t instanceof ut&&(this.matrix.elements,style=this._scope._preserve3d?this.getObjectCSSMatrix(t.matrixWorld):(this.matrix.copy(e.matrixWorldInverse),this.matrix.multiply(t.matrixWorld),this.getObjectCSSMatrix(this.matrix,t.is3d)),i=t.element,void 0!==(s=this.cache.objects[t.id])&&s===style||(i.style.WebkitTransform=style,i.style.MozTransform=style,i.style.oTransform=style,i.style.transform=style,i.style.msTransform=style,this.cache.objects[t.id]=style),null!=i.parentNode&&i.parentNode.parentNode===this.cameraElement||((s=document.createElement("div")).style.cssText="position:absolute;transform: translateZ(0px)",s.id="layer_"+i.attributes["data-zo"],s.style.zIndex=1e4-5*parseInt(i.attributes["data-zo"]),s.appendChild(i),this.cameraElement.appendChild(s),window.cam=this.cameraElement));for(var n=0,r=t.children.length;n<r;n++)this.renderObject(t.children[n],e)},t.prototype.render=function(t,e){t.updateMatrixWorld(),void 0===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),this._preserve3d||this.cache.camera.fov!==e.fov&&(this._fov=Math.tan(y.degToRad(.5*(180-(e.fov||180))))*(this._height/2),this.cache.camera.fov=e.fov),this.renderObject(t,e)},t.prototype.getObjectCSSMatrix=function(t,e){function i(t,e){return void 0===e&&(e=0),void 0!==t&&!isNaN(t)||(t=e),Math.abs(t)<1e-6?0:t}t=t.elements;return"translate3d(-50%,-50%,0)"+(e?" perspective("+this._fov+"px) translate3d(0,0,"+this._fov+"px)":"")+" matrix3d("+i(t[0],1)+","+i(-t[1])+","+i(t[2])+","+i(t[3])+","+i(-t[4])+","+i(t[5],1)+","+i(-t[6])+","+i(-t[7])+","+i(t[8])+","+i(-t[9])+","+i(t[10],1)+","+i(t[11])+","+i(t[12])+","+i(-t[13])+","+i(t[14])+","+i(t[15],1)+")"},t.prototype.setClearColor=function(t,e){var i,s="transparent";1<=e?(i=t.toString(16),s="#"+Array(6-i.length+1).join("0")+i):0<e&&(s="rgba("+((i=Math.floor(t))>>16&255)+","+(i>>8&255)+","+(255&i)+","+e+")"),this.domElement.style.backgroundColor=s},t.prototype.setSize=function(t,e){var i=(this._width=t)/2,s=(this._height=e)/2,n=(this.domElement.style.width=t+"px",this.domElement.style.height=e+"px",this.cameraElement.style);n.width=t+"px",n.height=e+"px",this._preserve3d||(n.WebkitTransform=t="translate3d("+i+"px,"+s+"px, 0px)",n.MozTransform=t,n.oTransform=t,n.transform=t,n.msTransform=t)},t}(),THREE={};try{!function(){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!self.requestAnimationFrame;++e)self.requestAnimationFrame=self[t[e]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[t[e]+"CancelAnimationFrame"]||self[t[e]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(0,16-(e-n)),s=self.setTimeout(function(){t(e+i)},i);return n=e+i,s}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(t){self.clearTimeout(t)})}(),THREE.Quaternion=rt,THREE.Vector2=it,THREE.Vector3=g,THREE.Vector4=et,THREE.Euler=st,THREE.Matrix3=nt,THREE.Matrix4=i,THREE.Math=y,THREE.EventDispatcher=at,THREE.Object3D=ot,THREE.Camera=ht,THREE.PerspectiveCamera=lt,THREE.ImageLoader=pt,THREE.Scene=ct,THREE.CSS3DRenderer=dt,THREE.CSS3DObject=ut}catch(t){q.reportExceptionError("three_declare_part1",t)}var j={},ft=1e-6;function mt(){var C=Math,v=Math.pow,g=Math.sqrt,c=Math.floor;function y(t,e,i,s,n,r){n=t*s+e*n+i*r-n*s-r*t-i*e;return-.001<n&&n<.001}var u=function(t,e,i,s){for(var n,r,a,o,h=0,l=[],c=[],u=bezierLengthPool.newElement(),p=i.length,d=0;d<50;d+=1){for(a=d/49,n=o=0;n<p;n+=1)r=v(1-a,3)*t[n]+3*v(1-a,2)*a*i[n]+3*(1-a)*v(a,2)*s[n]+v(a,3)*e[n],l[n]=r,null!==c[n]&&(o+=v(l[n]-c[n],2)),c[n]=l[n];o&&(h+=o=g(o)),u.percents[d]=a,u.lengths[d]=h}return u.addedLength=h,u};function x(t){this.segmentLength=0,this.points=new Array(t)}function w(t,e){this.partialLength=t,this.point=e}function t(t,e,i,s){var n=(t[0]+"_"+t[1]+"_"+e[0]+"_"+e[1]+"_"+i[0]+"_"+i[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!_[n]){for(var r,a,o,h,l,c=50,u=0,p=null,d=new x(c=2===t.length&&(t[0]!==e[0]||t[1]!==e[1])&&y(t[0],t[1],e[0],e[1],t[0]+i[0],t[1]+i[1])&&y(t[0],t[1],e[0],e[1],e[0]+s[0],e[1]+s[1])?2:c),f=i.length,m=0;m<c;m+=1){for(l=b(f),o=m/(c-1),r=h=0;r<f;r+=1)a=v(1-o,3)*t[r]+3*v(1-o,2)*o*(t[r]+i[r])+3*(1-o)*v(o,2)*(e[r]+s[r])+v(o,3)*e[r],l[r]=a,null!==p&&(h+=v(l[r]-p[r],2));u+=h=g(h),d.points[m]=new w(h,l),p=l}d.segmentLength=u,_[n]=d}return _[n]}var _;_={};function S(t,e){var i=e.percents,s=e.lengths,n=i.length,r=c((n-1)*t),a=t*e.addedLength,o=0;if(r===n-1||0===r||a===s[r])return i[r];for(var h=s[r]>a?-1:1,l=!0;l;)if(s[r]<=a&&s[r+1]>a?(o=(a-s[r])/(s[r+1]-s[r]),l=!1):r+=h,r<0||n-1<=r){if(r===n-1)return i[r];l=!1}return i[r]+(i[r+1]-i[r])*o}var P=V("float32",8);return{getSegmentsLength:function(t){for(var e=segmentsLengthPool.newElement(),i=t.c,s=t.v,n=t.o,r=t.i,a=t._length,o=e.lengths,h=0,l=0;l<a-1;l+=1)o[l]=u(s[l],s[l+1],n[l],r[l+1]),h+=o[l].addedLength;return i&&a&&(o[l]=u(s[l],s[0],n[l],r[0]),h+=o[l].addedLength),e.totalLength=h,e},getNewSegment:function(t,e,i,s,n,r,a){n<0?n=0:1<n&&(n=1);for(var n=S(n,a),r=S(r=1<r?1:r,a),o=t.length,h=1-r,l=(a=1-n)*a*a,c=n*a*a*3,u=n*n*a*3,p=n*n*n,d=a*a*h,f=n*a*h+a*n*h+a*a*r,m=n*n*h+a*n*r+n*a*r,v=n*n*r,g=a*h*h,y=n*h*h+a*r*h+a*h*r,x=n*r*h+a*r*r+n*h*r,w=n*r*r,_=h*h*h,b=r*h*h+h*r*h+h*h*r,M=r*r*h+h*r*r+r*h*r,T=r*r*r,k=0;k<o;k+=1)P[4*k]=C.round(1e3*(l*t[k]+c*i[k]+u*s[k]+p*e[k]))/1e3,P[4*k+1]=C.round(1e3*(d*t[k]+f*i[k]+m*s[k]+v*e[k]))/1e3,P[4*k+2]=C.round(1e3*(g*t[k]+y*i[k]+x*s[k]+w*e[k]))/1e3,P[4*k+3]=C.round(1e3*(_*t[k]+b*i[k]+M*s[k]+T*e[k]))/1e3;return P},getPointInSegment:function(t,e,i,s,n,r){return n=S(n,r),r=1-n,[C.round(1e3*(r*r*r*t[0]+(n*r*r+r*n*r+r*r*n)*i[0]+(n*n*r+r*n*n+n*r*n)*s[0]+n*n*n*e[0]))/1e3,C.round(1e3*(r*r*r*t[1]+(n*r*r+r*n*r+r*r*n)*i[1]+(n*n*r+r*n*n+n*r*n)*s[1]+n*n*n*e[1]))/1e3]},buildBezierData:t,pointOnLine2D:y,pointOnLine3D:function(t,e,i,s,n,r,a,o,h){var l;return 0===i&&0===r&&0===h?y(t,e,s,n,a,o):(l=C.sqrt(C.pow(s-t,2)+C.pow(n-e,2)+C.pow(r-i,2)),t=C.sqrt(C.pow(a-t,2)+C.pow(o-e,2)+C.pow(h-i,2)),e=C.sqrt(C.pow(a-s,2)+C.pow(o-n,2)+C.pow(h-r,2)),-1e-4<(i=t<l?e<l?l-t-e:e-t-l:t<e?e-t-l:t-l-e)&&i<1e-4)}}}var V=function(){function i(t,e){var i,s=0,n=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(s=0;s<e;s+=1)n.push(i);return n}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):i(t,e)}:i}();function b(t){return Array.apply(null,{length:t})}var R=mt(),M=(j.BezierFactory=function(){var t={getBezierEasing:function(t,e,i,s,n){n=n||("bez_"+t+"_"+e+"_"+i+"_"+s).replace(/\./g,"p");if(r[n])return r[n];t=new a([t,e,i,s]);return r[n]=t}},r={};var M=11,T=1/(M-1),e="function"==typeof Float32Array;function s(t,e){return 1-3*e+3*t}function B(t,e){return 3*e-6*t}function k(t,e,i){return((s(e,i)*t+B(e,i))*t+3*e)*t}function C(t,e,i){return 3*s(e,i)*t*t+2*B(e,i)*t+3*e}function a(t){this._p=t,this._mSampleValues=new(e?Float32Array:Array)(M),this._precomputed=!1,this.get=this.get.bind(this)}return a.prototype={get:function(t){var e=this._p[0],i=this._p[1],s=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),e===i&&s===n?t:0===t?0:1===t?1:k(this._getTForX(t),i,n)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],s=this._p[3];this._precomputed=!0,t===e&&i===s||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<M;++i)this._mSampleValues[i]=k(i*T,t,e)},_getTForX:function(t){for(var e=this._p[0],i=this._p[2],s=this._mSampleValues,n=0,r=1,a=M-1;r!==a&&s[r]<=t;++r)n+=T;var o=n+(t-s[--r])/(s[r+1]-s[r])*T,h=C(o,e,i);if(.001<=h){for(var l=t,c=o,u=e,p=i,d=0;d<4;++d){var f=C(c,u,p);if(0===f)return c;c-=(k(c,u,p)-l)/f}return c}if(0===h)return o;for(var m,v,g=t,y=n,x=n+T,w=e,_=i,b=0;0<(m=k(v=y+(x-y)/2,w,_)-g)?x=v:y=v,1e-7<Math.abs(m)&&++b<10;);return v}},t}(),j.PropertyFactory=function(){var l=-999999;function c(t,e){for(var i,s,n,r,a=this.offsetTime,o=("multidimensional"===this.propType&&(i=V("float32",this.pv.length)),e.lastIndex),h=o,l=this.keyframes.length-1,c=!0;c;){if(s=this.keyframes[h],n=this.keyframes[h+1],h===l-1&&t>=n.t-a){s.h&&(s=U(U({},s),{s:s.e})),o=0;break}if(n.t-a>t){o=h;break}h<l-1?h+=1:(o=0,c=!1)}var u,p,d,f,m,v=n.t-a,g=s.t-a;if(s.to){s.bezierData||(s.bezierData=R.buildBezierData(s.s,n.s||s.e,s.to,s.ti));var y=s.bezierData;if(v<=t||t<g)for(var x=v<=t?y.points.length-1:0,w=y.points[x].point.length,_=0;_<w;_+=1)i[_]=y.points[x].point[_];else{s.__fnct?r=s.__fnct:(r=j.BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,s.__fnct=r);for(var b,M=r((t-g)/(v-g)),T=y.segmentLength*M,k=e.lastTime<t&&e._lastKeyframeIndex===h?e._lastAddedLength:0,C=e.lastTime<t&&e._lastKeyframeIndex===h?e._lastPoint:0,c=!0,S=y.points.length;c;){if(k+=y.points[C].partialLength,0==T||0===M||C===y.points.length-1){for(w=y.points[C].point.length,_=0;_<w;_+=1)i[_]=y.points[C].point[_];break}if(k<=T&&T<k+y.points[C+1].partialLength){for(b=(T-k)/y.points[C+1].partialLength,w=y.points[C].point.length,_=0;_<w;_+=1)i[_]=y.points[C].point[_]+(y.points[C+1].point[_]-y.points[C].point[_])*b;break}C<S-1?C+=1:c=!1}e._lastPoint=C,e._lastAddedLength=k-y.points[C].partialLength,e._lastKeyframeIndex=h}}else{var P,E,z,I,A,O,L,l=s.s.length,F=n.s||s.e;if(this.sh&&1!==s.h)v<=t?(i[0]=F[0],i[1]=F[1],i[2]=F[2]):t<=g?(i[0]=s.s[0],i[1]=s.s[1],i[2]=s.s[2]):(O=D(s.s),L=D(F),u=i,O=function(t,e,i){var s,n,r,a=[],o=t[0],h=t[1],l=t[2],t=t[3],c=e[0],u=e[1],p=e[2],e=e[3];(r=o*c+h*u+l*p+t*e)<0&&(r=-r,c=-c,u=-u,p=-p,e=-e);r=1e-6<1-r?(r=Math.acos(r),s=Math.sin(r),n=Math.sin((1-i)*r)/s,Math.sin(i*r)/s):(n=1-i,i);return a[0]=n*o+r*c,a[1]=n*h+r*u,a[2]=n*l+r*p,a[3]=n*t+r*e,a}(O,L,(t-g)/(v-g)),L=O[0],p=O[1],d=O[2],O=O[3],f=Math.atan2(2*p*O-2*L*d,1-2*p*p-2*d*d),m=Math.asin(2*L*p+2*d*O),O=Math.atan2(2*L*O-2*p*d,1-2*L*L-2*d*d),u[0]=f/degToRads,u[1]=m/degToRads,u[2]=O/degToRads);else for(h=0;h<l;h+=1)1!==s.h&&(M=v<=t?1:t<g?0:(s.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[h]?r=s.__fnct[h]:(P=void 0===s.o.x[h]?s.o.x[0]:s.o.x[h],E=void 0===s.o.y[h]?s.o.y[0]:s.o.y[h],z=void 0===s.i.x[h]?s.i.x[0]:s.i.x[h],I=void 0===s.i.y[h]?s.i.y[0]:s.i.y[h],r=j.BezierFactory.getBezierEasing(P,E,z,I).get,s.__fnct[h]=r)):s.__fnct?r=s.__fnct:(P=s.o.x,E=s.o.y,z=s.i.x,I=s.i.y,r=j.BezierFactory.getBezierEasing(P,E,z,I).get,s.__fnct=r),r((t-g)/(v-g)))),F=n.s||s.e,A=1===s.h?s.s[h]:s.s[h]+(F[h]+ft-s.s[h])*M,"multidimensional"===this.propType?i[h]=A:i=A}return e.lastIndex=o,i}function D(t){var e=t[0]*degToRads,i=t[1]*degToRads,t=t[2]*degToRads,s=Math.cos(e/2),n=Math.cos(i/2),r=Math.cos(t/2),e=Math.sin(e/2),i=Math.sin(i/2),t=Math.sin(t/2);return[e*i*r+s*n*t,e*n*r+s*i*t,s*i*r-e*n*t,s*n*r-e*i*t]}function u(t){var t=t-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastTime||this._caching.lastTime!==l&&(this._caching.lastTime>=i&&i<=t||this._caching.lastTime<e&&t<e))&&(this._caching.lastTime>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0),this.pv=this.interpolateValue(t,this._caching),this.mult)&&1!=this.mult)if("unidimensional"==this.propType)this.pv*=this.mult;else for(var s=0;s<this.pv.length;s++)this.pv[s]*=this.mult;return this._caching.lastTime=t,this.pv}function e(t){var e=t.mult;this.propType="unidimensional",this.keyframes=t.k,this.offsetTime=0,this.frameId=-1,this._caching={lastTime:l,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=e||1,this.v=l,this.pv=l,this._isFirstFrame=!0,this.interpolateValue=c,this.getValueAtTime=u.bind(this)}function i(t){for(var e,i,s,n,r=t.mult,a=(this.propType="multidimensional",t.k.length),o=0;o<a-1;o+=1)t.k[o].to&&!t.k[o].ti&&(t.k[o].ti=[0,0,0]),!t.k[o].to&&t.k[o].ti&&(t.k[o].to=[0,0,0]),null!=(e=t.k[o].to)&&e.every(function(t){return 0===t})&&null!=(e=t.k[o].ti)&&e.every(function(t){return 0===t})&&(t.k[o].to=null,t.k[o].ti=null),t.k[o].to&&t.k[o].s&&t.k[o+1]&&t.k[o+1].s&&(e=t.k[o].s,i=t.k[o+1].s,s=t.k[o].to,n=t.k[o].ti,(2===e.length&&(e[0]!==i[0]||e[1]!==i[1])&&R.pointOnLine2D(e[0],e[1],i[0],i[1],e[0]+s[0],e[1]+s[1])&&R.pointOnLine2D(e[0],e[1],i[0],i[1],i[0]+n[0],i[1]+n[1])||3===e.length&&(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2])&&R.pointOnLine3D(e[0],e[1],e[2],i[0],i[1],i[2],e[0]+s[0],e[1]+s[1],e[2]+s[2])&&R.pointOnLine3D(e[0],e[1],e[2],i[0],i[1],i[2],i[0]+n[0],i[1]+n[1],i[2]+n[2]))&&(t.k[o].to=null,t.k[o].ti=null),e[0]===i[0])&&e[1]===i[1]&&0===s[0]&&0===s[1]&&0===n[0]&&0===n[1]&&(2===e.length||e[2]===i[2]&&0===s[2]&&0===n[2])&&(t.k[o].to=null,t.k[o].ti=null);this.getValueAtTime=u.bind(this),this.data=t,this.keyframes=t.k,this.offsetTime=0,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.interpolateValue=c,this.frameId=-1;var h=t.k[0].s.length;for(this.v=V("float32",h),this.pv=V("float32",h),o=0;o<h;o+=1)this.v[o]=l,this.pv[o]=l;this._caching={lastTime:l,lastIndex:0,value:V("float32",h)}}return{getProp:function(t){return t=new(1==t.k[0].s.length?e:i)(t)}}}(),j.ShapePropertyFactory=function(){var n=-999999;function e(t,e,i){var s,n,r,a,o,h,l,c=i.lastIndex,u=this.keyframes;if(t<u[0].t-this.offsetTime)s=u[0].s[0],n=!0,c=0;else if(t>=u[u.length-1].t-this.offsetTime)s=(u[u.length-1].s?u[u.length-1].s:u[u.length-2].e)[0],n=!0;else{for(var p,d,f,m,v,g=c,y=u.length-1,x=!0;x&&(p=u[g],!((d=u[g+1]).t-this.offsetTime>t));)g<y-1?g+=1:x=!1;c=g,(n=1===p.h)||(m=t>=d.t-this.offsetTime?1:t<p.t-this.offsetTime?0:(p.__fnct?f=p.__fnct:(f=j.BezierFactory.getBezierEasing(p.o.x,p.o.y,p.i.x,p.i.y).get,p.__fnct=f),f((t-(p.t-this.offsetTime))/(d.t-this.offsetTime-(p.t-this.offsetTime)))),v=(d.s||p.e)[0]),s=p.s[0]}for(o=e._length,h=s.i[0].length,i.lastIndex=c,r=0;r<o;r+=1)for(a=0;a<h;a+=1)l=n?s.i[r][a]:s.i[r][a]+(v.i[r][a]-s.i[r][a])*m,e.i[r][a]=l,l=n?s.o[r][a]:s.o[r][a]+(v.o[r][a]-s.o[r][a])*m,e.o[r][a]=l,l=n?s.v[r][a]:s.v[r][a]+(v.v[r][a]-s.v[r][a])*m,e.v[r][a]=l;e.v.splice(o),e.i.splice(o),e.o.splice(o)}var t=function(t,e,i){var s=0,n=t,r=b(n);return{newElement:function(){var t;t=s?r[--s]:e();return t},release:function(t){s===n&&(r=pooling.double(r),n*=2);i&&i(t);r[s]=t,s+=1}}},a=t(8,function(){return V("float32",2)});function h(){this.c=!1,this._length=0,this._maxLength=8,this.v=b(this._maxLength),this.o=b(this._maxLength),this.i=b(this._maxLength)}h.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=a.newElement(),this.o[i]=a.newElement(),this.i[i]=a.newElement(),i+=1},h.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},h.prototype.doubleArrayLength=function(){this.v=this.v.concat(b(this._maxLength)),this.i=this.i.concat(b(this._maxLength)),this.o=this.o.concat(b(this._maxLength)),this._maxLength*=2},h.prototype.setXYAt=function(t,e,i,s,n){var r;switch(this._length=Math.max(this._length,s+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":r=this.v;break;case"i":r=this.i;break;case"o":r=this.o;break;default:r=[]}r[s]&&(!r[s]||n)||(r[s]=a.newElement()),r[s][0]=t,r[s][1]=e},h.prototype.setTripleAt=function(t,e,i,s,n,r,a,o){this.setXYAt(t,e,"v",a,o),this.setXYAt(i,s,"o",a,o),this.setXYAt(n,r,"i",a,o)},h.prototype.reverse=function(){for(var t=new h,e=(t.setPathData(this.c,this._length),this.v),i=this.o,s=this.i,n=0,r=(this.c&&(t.setTripleAt(e[0][0],e[0][1],s[0][0],s[0][1],i[0][0],i[0][1],0,!1),n=1),this._length-1),a=this._length,o=n;o<a;o+=1)t.setTripleAt(e[r][0],e[r][1],s[r][0],s[r][1],i[r][0],i[r][1],o,!1),--r;return t};(r=t(4,function(){return new h},function(t){for(var e=t._length,i=0;i<e;i+=1)a.release(t.v[i]),a.release(t.i[i]),a.release(t.o[i]),t.v[i]=null,t.i[i]=null,t.o[i]=null;t._length=0,t.c=!1})).clone=function(t){var e,i=r.newElement(),s=void 0===t._length?t.v.length:t._length;for(i.setLength(s),i.c=t.c,e=0;e<s;e+=1)i.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return i};var r,i=r;function s(t){this.propType="shape",this.keyframes=t.k,this.c=t.c,this.k=!0,this.kf=!0;t=this.keyframes[0].s[0].i.length;this.offsetTime=0,this.v=i.newElement(),this.v.setPathData(this.c,t),this.pv=i.clone(this.v),this.lastTime=n,this._caching={lastTime:n,lastIndex:0},this.interpolateShape=e,this.getValueAtTime=function(t){var t=t-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime,s=this._caching.lastTime;return s!==n&&(s<e&&t<e||i<s&&i<t)||(this._caching.lastIndex=s<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastTime=t,this.pv}.bind(this)}s.prototype.interpolateShape=e;t={getShapeProp:function(t){return new s(t)}};return t}(),{Rectangle:"rectangle",Ellipse:"ellipse",Polystar:"polystar",Path:"path",TrimPath:"trimpath",MergePath:"mergepath"}),A={Solid:0,LinearGradient:1,RadialGradient:2},vt={Percent:1,Index:2},x={Char:1,CharWithoutSpace:2,Word:3,Line:4},gt={Top:0,Center:1,Bottom:2};function yt(){this.children=[],this.stbyMesh=null,this.start=this.s,this.end=this.e,this.isTranformApplied=!1,this.displayStat=0,this.eff||(this.eff=[]),this.tr&&(this.tr.p||void 0!==this.tr.px&&void 0!==this.tr.py||(this.tr.p=[0,0,0]),this.tr.s=this.tr.s||[1,1,1],this.tr.o=this.tr.o||[0,0,0],this.tr.an=this.tr.an||[0,0,0],this.tr.rx=this.tr.rx||0,this.tr.ry=this.tr.ry||0,this.tr.rz=this.tr.rz||0,this.tr.a=this.tr.a||1),this.error="",this.isInScene=!1,this.mesh=null,this.obj3D=null,this.addToScene=function(){["HTMLWidget","Widget"].includes(this.ty)&&this.obj3D.parent||(null!=this.parent?this.parent.mesh:this.comp.cameraObj.isDefaultCam||this.is3d?this.comp.scene:this.comp.camera.screenObj).add(this.obj3D)},this.removeFromScene=function(){for(var t=0;t<this.children.length;t++)this.children[t].removeFromScene();null!=this.obj3D&&null!=this.obj3D.parent&&this.obj3D.parent.remove(this.obj3D),void 0!==this.element&&null!==this.element.parentNode&&this.element.parentNode.remove()},this.hideLayer=function(t){this.element&&(this.element.style.display="none")},this.showLayer=function(t){this.element&&(this.element.style.display="block")},this.getEaliestStart=function(){for(var t=this.start,e=0;e<this.children.length;e++){var i=this.children[e].getEaliestStart();i<t&&(t=i)}return t},this.getLatestEnd=function(){for(var t=this.end,e=0;e<this.children.length;e++){var i=this.children[e].getLatestEnd();t<i&&(t=i)}return t},this.update=function(t,e){t>=this.sceneStart&&t<=this.sceneEnd?this.isInScene=!0:this.isInScene=!1,t>=this.start&&t<=this.end?this.displayStat=1:this.displayStat=0,this.sceneStart<this.start&&t>=this.sceneStart&&t<this.start&&this.comp.lastTime<this.sceneStart?(this.hideLayer(t),this.addToScene(t),this.isInScene=!0,this.shouldInit=!0):t>=this.start&&t<=this.end&&this.comp.lastTime<this.start?(this.showLayer(t),null!=this.obj3D.parent&&!["HTMLWidget","Widget"].includes(this.ty)||(this.addToScene(t),this.shouldInit=!0),"Video"!==this.ty&&"Audio"!==this.ty||e||this.play(t)):this.sceneEnd>this.end&&t>this.end&&this.comp.lastTime<=this.end&&t<=this.sceneEnd?(this.displayStat=1,this.hideLayer(),"Video"!==this.ty&&"Audio"!==this.ty||this.pause(t)):this.sceneEnd===this.end&&t>this.end&&this.comp.lastTime<=this.end?(this.displayStat=2,this.removeFromScene(),"Video"!==this.ty&&"Audio"!==this.ty||this.pause(t),this.isInScene=!1):this.sceneEnd>this.end&&t>this.sceneEnd&&this.comp.lastTime<=this.sceneEnd&&(this.removeFromScene(),this.showLayer()),this.isInScene&&(this.updateProperties&&this.updateProperties(t/1e3),!this.tr.isPropertiesUpdated()&&this.isTranformApplied||(this.isTranformApplied=!0,this.applyLayerTransform()));for(var i=0;i<this.children.length;i++)this.children[i].update(t,this.shouldInit);this.shouldInit=!1},this.init=function(){this.shouldInit=!0},this.applyLayerTransform=function(){var t,e,i,s=this.tr;s.p?(t=(i=s.p)[0],e=i[1],i=i[2],this.obj3D.position.set(t,-e,-i)):this.obj3D.position.set(s.px,-s.py,-s.pz||0),this.obj3D.rotation.set(s.o[0],-s.o[1],-s.o[2]),0!==s.rx&&this.obj3D.rotateX(s.rx),0!==s.ry&&this.obj3D.rotateY(-s.ry),0!==s.rz&&this.obj3D.rotateZ(-s.rz),this.mesh.position.x=-s.an[0],this.mesh.position.y=s.an[1],this.mesh.position.z=s.an[2],this.obj3D.scale.set(s.s[0],s.s[1],s.s[2])},this.stop=function(t){"Video"!==this.ty&&"Audio"!==this.ty||this.pause(t),this.removeFromScene(),this.displayStat=0,this.isInScene=!1,this.drawTime=-1,this.showLayer()}}var w={Mask:"mask",Shadow:"shadow",Fill:"fill",BoxBlur:"boxBlur",ColorOverlay:"colOver",TrkMatte:"trkmatte"},xt={HorizontalAndVertical:1,Horizontal:2,Vertical:3};function _(t,e){this.inCan=t,this.outCan=e,this.inCtx=null==(t=this.inCan)?void 0:t.getContext("2d"),this.outCtx=null==(e=this.outCan)?void 0:e.getContext("2d"),this.csm=window.devicePixelRatio,this.initEffectCanvas=function(){this.inCan&&(this.outCan.width=this.inCan.width,this.outCan.height=this.inCan.height,this.outCan.style.cssText=this.inCan.style.cssText,this.outCtx.resetTransform(),this.outCtx.translate(this.outCan.width/2,this.outCan.height/2),this.outCtx.scale(this.csm,this.csm),this.outCtx.save())},this.initEffectCanvas(),this.isUpdated=function(){return!!this.isSpecificPropertyUpdated_||!!this.isPropertiesUpdated&&this.isPropertiesUpdated()},this.effectPointWorldToLocal=function(t,e){t=new THREE.Vector3(t,e,0),e=this.parent,t=e.mesh.worldToLocal(t);return e.x&&(t.x-=e.x),e.y&&(t.y-=e.y),t.y=-t.y,t},this.getExtraOffsets=function(){return{wx:0,hx:0}},this.effectDrawInCantoOutCan=function(){var t=this;t.outCtx.save(),t.outCtx.scale(1/t.parent.csm,1/t.parent.csm),t.outCtx.clearRect(-t.outCan.width/2,-t.outCan.height/2,t.outCan.width,t.outCan.height),t.outCtx.drawImage(t.inCan,-t.outCan.width/2,-t.outCan.height/2,t.outCan.width,t.outCan.height),t.outCtx.restore()}}var wt=["","butt","round","square"],_t=["","miter","round","bevel"];function bt(t,e){t.beginPath(),t.moveTo(e.v[0][0],e.v[0][1]);for(var i=0,s=1;s<e.v.length&&e.v[s];s++){i=s;try{t.bezierCurveTo(e.v[s-1][0]+e.o[s-1][0],e.v[s-1][1]+e.o[s-1][1],e.v[s][0]+e.i[s][0],e.v[s][1]+e.i[s][1],e.v[s][0],e.v[s][1])}catch(t){}}e.c&&(s=i,t.bezierCurveTo(e.v[s][0]+e.o[s][0],e.v[s][1]+e.o[s][1],e.v[0][0]+e.i[0][0],e.v[0][1]+e.i[0][1],e.v[0][0],e.v[0][1]),t.closePath())}function Mt(t,e){e.fillStyle=kt(t,e),e.globalAlpha=e.globalAlpha*t.a}function Tt(t,e){e.lineWidth=t.w,t.dashes&&(e.setLineDash(t.dashes.pattern.map(function(t){return t.value})),e.lineDashOffset=t.dashes.offset),e.lineCap=wt[t.lc||1],e.lineJoin=_t[t.lj||1],e.strokeStyle=kt(t,e),e.globalAlpha=e.globalAlpha*t.a}function kt(t,e){var i=t.o,s=i.c,n=i.cs,r=i.e,r=void 0===r?[]:r,a=r[0],o=r[1],r=i.s,r=void 0===r?[]:r,h=r[0],l=r[1],r=i.hl,c=void 0===r?[]:r,r=i.ha,u=void 0===r?[]:r;switch(t.t){case A.Solid:return Ct(s);case A.LinearGradient:for(var p=e.createLinearGradient(h,l,a,o),d=0,f=n;d<f.length;d++){var m=f[d],v=m.s,g=m.c,y=m.a;p.addColorStop(v,Pt(g,y))}return p;case A.RadialGradient:for(var x=Math.atan2(o-l,a-h),w=Math.sqrt(Math.pow(a-h,2)+Math.pow(o-l,2)),_=h+w*c*Math.cos(x+u),x=l+w*c*Math.sin(x+u),b=e.createRadialGradient(_,x,0,h,l,w),M=0,T=n;M<T.length;M++){var k=T[M],v=k.s,C=k.c,y=k.a;b.addColorStop(v,Pt(C,y))}return b}}function Ct(t,e){e=e?255:1;return 3==t.length?"rgb("+parseInt(t[0]*e)+","+parseInt(t[1]*e)+","+parseInt(t[2]*e)+")":"rgba("+parseInt(t[0]*e)+","+parseInt(t[1]*e)+","+parseInt(t[2]*e)+","+t[3]+")"}function St(t){var e=document.createElement("canvas"),e=(e.width=t.canvas.width,e.height=t.canvas.height,e.getContext("2d"));return e.setTransform(t.getTransform()),e}function Pt(t,e){var i;return e<1?-1!=t.indexOf("#")?(i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+","+e+")"):t.replace(/[\d\.]+\)$/g,e+")"):t}function Et(t,e){_.call(this,t,e),this.outCan=e,this.isUpdated=function(){return this.masks.some(function(t){return t.isPropertiesUpdated()})},this.drawOnCanvas=function(){this.effectDrawInCantoOutCan(),zt(this.masks,this.outCan,this.outCtx,this.parent)}}function zt(t,e,i,s){var n=1/s.csm,r=document.createElement("canvas"),a=(r.width=e.width*n,r.height=e.height*n,r.getContext("2d")),o=r.width/2-s.x,h=r.height/2+s.y;a.translate(o,h);for(var l=0;l<t.length;l++){a.save();var c=t[l],u=(a.globalAlpha=c.a,0===l&&2===c.c&&a.fillRect(-o,-h,r.width,r.height),(c.fy[0]+c.fy[1])/2);switch(0==u||(a.translate(-4*r.width,0),a.shadowColor="#000",a.shadowOffsetX=4*r.width,a.shadowBlur=u),bt(a,c.path),a.fillStyle="#000",c.c){case 2:a.globalCompositeOperation="destination-out";break;case 3:a.globalCompositeOperation="destination-in";break;case 4:a.globalCompositeOperation="lighter"}a.fill(),a.restore()}i.save(),i.globalCompositeOperation="destination-in",i.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),i.restore()}function It(t,e){_.call(this,t,e),this.a=this.a||1,this.d=this.d||0,this.n=this.n||0,this.b=this.b||0,this.updateSpecific=function(){var t=this.d,e=this.n,i=this.b,s=-Math.cos(e)*t,e=Math.sin(e)*t,t=this.effectPointWorldToLocal(s,e),n=t.x,t=t.y,r=this.effectPointWorldToLocal(0,0),n=n-r.x,r=r.y-t,t=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/Math.sqrt(Math.pow(s,2)+Math.pow(e,2))||1;this.isSpecificPropertyUpdated_=n!==this.offsetX||r!==this.offsetY||i*t!==this.blur,this.offsetX=n,this.offsetY=r,this.blur=i*t},this.getExtraOffsets=function(){return{wx:Math.abs(this.offsetX)+this.blur,hx:Math.abs(this.offsetY)+this.blur}},this.drawOnCanvas=function(){var t=this,e=t.outCan,i=t.outCtx,s=t.parent.csm,n=t.blur,r=t.a,a=t.c,o=t.offsetX,t=t.offsetY;i.save(),i.scale(1/s,1/s),i.clearRect(-e.width/2,-e.height/2,e.width,e.height),i.restore(),i.shadowColor="rgba(".concat([a.slice(0,3),r].join(","),")"),i.shadowOffsetX=o*s,i.shadowOffsetY=t*s,i.shadowBlur=n*s,this.effectDrawInCantoOutCan(),i.restore()},this.drawOnHtml=function(t){var e=this,i=e.b,s=e.a,n=e.c,r=e.d,e=e.n,e=[(-Math.cos(e)*r).toFixed(1)+"px",(Math.sin(e)*r).toFixed(1)+"px",i.toFixed(1)+"px "+"rgba(".concat([n.slice(0,3),s].join(","),")")].join(" ");t.style.filter="drop-shadow("+e+")",t.style.overflow="visible",t.style.filter||(t.style.textShadow=e)}}function At(t,o){_.call(this,t,o),this.drawOnCanvas=function(){var t=this,e=t.inCan,i=t.outCan,s=t.outCtx,n=t.parent.csm,r=t.a,a=t.c,t=t.inv;s.save(),s.scale(1/n,1/n),s.clearRect(-i.width/2,-i.height/2,i.width,i.height),s.drawImage(e,-i.width/2,-i.height/2,i.width,i.height),s.fillStyle="rgb(".concat(a.slice(0,3).join(","),")"),s.globalAlpha=r,s.globalCompositeOperation=t?"source-out":"source-in",s.fillRect(-o.width/2,-o.height/2,o.width,o.height),s.restore()}}function Ot(t,a){_.call(this,t,a),this.drawOnCanvas=function(){var t=this,e=t.inCan,i=t.outCan,s=t.outCtx,n=t.parent.csm,r=t.a,t=t.c;s.save(),s.scale(1/n,1/n),s.clearRect(-i.width/2,-i.height/2,i.width,i.height),s.drawImage(e,-i.width/2,-i.height/2,i.width,i.height),s.fillStyle="rgb(".concat(t.slice(0,3).join(","),")"),s.globalAlpha=r,s.globalCompositeOperation="source-in",s.fillRect(-a.width/2,-a.height/2,a.width,a.height),r<1&&(s.globalCompositeOperation="lighter",s.globalAlpha=1-r,s.drawImage(e,-i.width/2,-i.height/2,i.width,i.height)),s.restore()}}function Lt(t,e){_.call(this,t,e),this.getExtraOffsets=function(){var t=this.r,e=this.dim,i=this.it,i=void 0===i?1:i;return{wx:(4-e&xt.Horizontal?Math.round(t):0)*i,hx:(4-e&xt.Vertical?Math.round(t):0)*i}},this.drawOnCanvas=function(){var t=this,e=t.r,i=t.dim,s=t.it,n=void 0===s?1:s,s=t.parent.csm,t=t.outCtx,e=Array.isArray(e)?e[0]:e,E=4-i&xt.Horizontal?Math.round(e):0,z=4-i&xt.Vertical?Math.round(e):0;if(isNaN(e)||e<1)this.effectDrawInCantoOutCan();else{for(var i=document.createElement("canvas"),I=(i.width=this.inCan.width/s,i.height=this.inCan.height/s,i.getContext("2d")),A=i.width,O=i.height,L=2*E+1,F=2*z+1,r=(I.drawImage(this.inCan,0,0,A,O),isNaN(n)&&(n=1),(n=3<(n|=0)?3:n)<1&&(n=1),n=3,function(t){function s(t){return[255/t,255/t,255/t,0]}var n=I.getImageData(0,0,A,O).data,e=I.createImageData(A,O);function i(t,e,i){return void 0===i&&(i=n),t<0||e<0||A<=t||O<=e?s(1):[(t=i.slice(i=4*(t*A+e),4+i))[0],t[1],t[2],t[3]]}for(var r=[],a=0;a<A;a++){r[a]=[];for(var o=0;o<O;o++)if(0===o){for(var h=[0,0,0,0],l=-E;l<=E;l++){var c=i(a,o-l),u=c[0],p=c[1],d=c[2],f=c[3];h[0]+=u,h[1]+=p,h[2]+=d,h[3]+=f}r[a][o]=[h[0]/L,h[1]/L,h[2]/L,h[3]/L]}else{var m=r[a][o-1],v=m[0],g=m[1],y=m[2],m=m[3],x=i(a,o-E-1),w=x[0],_=x[1],b=x[2],x=x[3],M=i(a,o+E),T=M[0],k=M[1],C=M[2],M=M[3];r[a][o]=[v+(T-w)/L,g+(k-_)/L,y+(C-b)/L,m+(M-x)/L]}}for(o=0;o<O;o++)for(a=0;a<A;a++){for(var S=4*(a*A+o),h=[0,0,0,0],l=-z;l<=z;l++)try{var P=a+l<0||A<=a+l?s(L):r[a+l][o],u=P[0],p=P[1],d=P[2],f=P[3];h[0]+=u,h[1]+=p,h[2]+=d,h[3]+=f}catch(t){}e.data[S]=h[0]/F,e.data[1+S]=h[1]/F,e.data[2+S]=h[2]/F,e.data[3+S]=h[3]/F}I.putImageData(e,0,0)}),a=0;a<n;a++)r();t.clearRect(-A/2,-O/2,A,O),t.drawImage(i,-A/2,-O/2,A,O)}}}var Ft=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"];function Dt(t,e){_.call(this,t,e),this.mat=new THREE.Matrix4,this.c={x:0,y:0,rz:0,sx:1,sy:1,alphaUpdated:1,a:this.tm.tr.a};var a=this,i=this.isUpdated.bind(this),s=!1;this.isUpdated=function(){var t=s;return s=a.tm.contentNeedRedraw(),i()||t},this.updateSpecific=function(){var t=a,e=new THREE.Matrix4,e=(e.getInverse(t.parent.mesh.matrixWorld),t.mat.multiplyMatrices(e,t.tm.mesh.matrixWorld),new THREE.Vector3),i=new THREE.Quaternion,s=new THREE.Vector3,i=(t.mat.decompose(e,i,s),i.normalize(),this.tm.mesh.matrixWorld),i=Math.atan2(i.get(1,0),i.get(0,0)),e={x:e.x,y:e.y,rz:i,sx:s.x,sy:s.y,a:t.tm.tr.a};this.isSpecificPropertyUpdated_=!q.deepEqual(e,this.c),this.c=e},this.drawOnCanvas=function(){var t=a,e=(t.tm.calculateLayerSizeAndShiftAndUpdateLayer(),t.outCtx),i=t.outCan;if(e.save(),e.scale(1/t.parent.csm,1/t.parent.csm),e.clearRect(-i.width/2,-i.height/2,i.width,i.height),e.drawImage(t.inCan,-i.width/2,-i.height/2,i.width,i.height),e.restore(),e.save(),e.transform(1,0,0,1,-t.parent.x,t.parent.y),e.transform(1,0,0,1,t.c.x,-t.c.y),e.rotate(t.c.rz),e.scale(t.c.sx,t.c.sy),e.translate(t.tm.x,-t.tm.y),5==t.tmt||6==t.tmt)e.globalCompositeOperation=Ft[t.tmt];else{for(var i=t.tm.outCan.getContext("2d"),s=i.getImageData(0,0,t.tm.outCan.width,t.tm.outCan.height),n=s.data,r=0;r<n.length;r+=4)n[r+3]=(n[r]+n[r+1]+n[r+2])/3;i.putImageData(s,0,0),8==t.tmt?e.globalCompositeOperation=Ft[5]:9==t.tmt&&(e.globalCompositeOperation=Ft[6])}e.globalAlpha=t.c.a,e.drawImage(t.tm.outCan,-t.tm.outCan.width/2,-t.tm.outCan.height/2,t.tm.outCan.width,t.tm.outCan.height),e.restore()}}var jt=["Null","Audio","Camera"],Vt=["shadow"],Rt=["Image","Video","Text","Html"];function T(){var t,e,i=this,s=(yt.call(this),this.eff=this.eff||[],this.masks=this.masks||[],this.isHtml=Bt(this),this.calculateLayerSizeAndShiftAndUpdateLayer=function(){var t,e=this,i=e.x,s=e.y,n=e.w,r=e.h,a=e.wx,o=e.hx;e.w=0,e.h=0,e.x=0,e.y=0,e.wx=0;for(var h=e.hx=0,l=e.eff;h<l.length;h++){var c,u=l[h];u.getExtraOffsets&&(c=(u=u.getExtraOffsets()).wx,u=u.hx,e.wx+=Math.abs(2*c)||0,e.hx+=Math.abs(2*u)||0)}null!=(t=e.updateLayerBoundaries)&&t.call(e),e.x===i&&e.y===s&&e.w===n&&e.h===r&&e.hx===o&&e.wx===a||this.initContentCanvasSizeAndCtxAndLayerCSS()},this.initContentCanvasSizeAndCtxAndLayerCSS=function(){var t,e;this.isHtml||(this.canvas.width=(this.w+this.wx)*this.csm,this.canvas.height=(this.h+this.hx)*this.csm,t=this.canvas.width/this.csm,e=this.canvas.height/this.csm,this.canvas.style.cssText="position:absolute;width:"+t+"px;height:"+e+"px;",this.ctx=this.canvas.getContext("2d"),this.ctx.translate(this.canvas.width/2,this.canvas.height/2),this.ctx.scale(this.csm,this.csm),this.ctx.save()),this.element.style.width=(this.isHtml?this.w:t)+"px",this.element.style.height=(this.isHtml?this.h:e)+"px",this.subElm.style.cssText="position:absolute;width:"+(this.isHtml?this.w:t)+"px;height:"+(this.isHtml?this.h:e)+"px;left:"+this.x+"px;top:"+-this.y+"px;pointer-events:auto;touch-action:auto",adParams.drawDebugBoxes&&(this.subElm.style.outline="2px solid #8eff00",this.subElm.style.outlineOffset="outline-offset:-1px",this.subElm.style.backgroundColor="#8eff0030",this.debugElm||(this.debugElm=document.createElement("div"),this.debugElm.style.cssText="display:block;position:absolute;padding: 2px;font-size: 14px;font-family:sans-serif",this.anchorPoint=document.createElement("div"),this.anchorPoint.style.cssText="display:block;position:absolute;width:6px;height:6px;border-radius:50%;background-color:#44aa00;transform:translate(-50%,-50%)",this.debugElm.innerText="Layer ".concat(this.i),this.debugElm.appendChild(this.anchorPoint),this.element.appendChild(this.debugElm)),this.debugElm.style.left=this.x+"px",this.debugElm.style.top=-this.y+"px",this.anchorPoint.style.top=this.tr.an[0],this.anchorPoint.style.left=this.tr.an[1]);for(var i=0,s=this.eff;i<s.length;i++){var n=s[i];n.initEffectCanvas&&n.initEffectCanvas()}},this.isHtml||(this.csm=window.devicePixelRatio,this.canvas=document.createElement("canvas"),this.outCan=this.canvas),this.shouldInit=!1,this);if(this.element=document.createElement("div"),this.subElm=document.createElement("div"),this.element.appendChild(this.subElm),this.calculateLayerSizeAndShiftAndUpdateLayer(),this.isHtml||void 0===this.is_tm&&this.subElm.appendChild(this.outCan),this.mesh=new THREE.CSS3DObject(this.element),this.mesh.is3d=this.is3d,this.element.attributes["data-zo"]=this.i,this.element.style.pointerEvents="none",this.element.style.touchAction="none",this.subElm.style.pointerEvents="auto",this.subElm.style.touchAction="auto",this.clk&&(this.subElm.style.cursor="pointer",this.subElm.onclick=function(t){if(s.clk)return q.click(s.clk,s.clkType,t),!1}),this.selected=!1,this.selected&&(this.subElm.style.border="1px solid yellow",this.subElm.style.backgroundColor="rgba(255,248,111,1)",t='<div class="position-point" style="z-index:999999999;position:absolute;width:2px;height:2px;background:green;left:'+this.w/2+"px;top:"+this.h/2+'px"></div>',t=t,e=document.createElement("template"),t=t.trim(),e.innerHTML=t,t=e.content.firstChild,this.element.appendChild(t)),this.obj3D=new THREE.Object3D,this.obj3D.add(this.mesh),this.drawTime=-1,0<this.masks.length&&(e={ty:"mask",masks:this.masks},this.eff.push(e)),void 0!==this.has_tm)for(var n=0;n<this.comp.l.length;n++)if(this.comp.l[n].i==this.has_tm){var r={ty:"trkmatte",tm:this.comp.l[n],tmt:this.tmt,t:1};this.eff.unshift(r),this.comp.l[n].tml=this;break}for(n=0;n<this.eff.length;n++){(this.eff[n].parent=this).isHtml||(a=0===n?this.canvas:this.eff[n-1].outCan,this.outCan=document.createElement("canvas"),void 0===this.is_tm&&(this.subElm.removeChild(a),this.subElm.appendChild(this.outCan))),(o={})[w.Mask]=Et,o[w.Shadow]=It,o[w.Fill]=At,o[w.ColorOverlay]=Ot,o[w.BoxBlur]=Lt,o[w.TrkMatte]=Dt;var a,o=o[this.eff[n].ty];o?o.call(this.eff[n],a,this.outCan):(delete this.eff[n],n--)}this.draw=function(t,e){if(jt.indexOf(this.ty)<0)if(this.isHtml){if(1===this.displayStat){var i=!1;this.contentNeedRedraw(t)&&(this.drawTime=t,this.calculateLayerSizeAndShiftAndUpdateLayer(),this.drawContent(t),-1!=this.drawTime&&(i=!0),this.clk)&&q.isShowClickAreas()&&showClickableAreasNativeHtml&&showClickableAreasNativeHtml(this),this.mesh.element.style.opacity=this.tr.a;for(var s=0,n=this.eff;s<n.length;s++){var r=n[s];r.updateSpecific&&r.updateSpecific(),(i||r.isUpdated(t))&&r.drawOnHtml(this.subElm)}}}else{if(!this.isInScene)return;if(1===this.displayStat){for(var a=this.tr,o=(void 0===this.is_tm&&(this.mesh.element.style.opacity=a.a),-1),h=0;h<this.eff.length;h++)this.eff[h].updateSpecific&&this.eff[h].updateSpecific();if(this.contentNeedRedraw(t))o=0;else for(h=0;h<this.eff.length;h++)if(this.eff[h].isUpdated()){o=h+1;break}if(0<=o&&0<this.tr.a){if(void 0!==this.is_tm)for(h=0;h<this.tml.eff.length;h++)"trkmatte"===this.tml.eff[h].ty&&(this.tml.eff[h].c.alphaUpdated*=-1);this.drawTime=t;for(h=0;h<=this.eff.length;h++)0===h?(this.ctx.save(),this.ctx.resetTransform(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore(),this.calculateLayerSizeAndShiftAndUpdateLayer(),this.drawContent(t),this.clk&&q.isShowClickAreas()&&showClickableAreas&&showClickableAreas(this)):this.eff[h-1].drawOnCanvas()}}void 0!==this.tml&&this.tml.drawTime!==t&&this.tml.draw(t,!1)}if(void 0===e||!0===e)for(h=0;h<this.children.length;h++)this.children[h].draw(t)},this.mute=function(t){"Video"===i.ty&&this.isVidPlayable()&&(this.vid.muted=t)},this.dispose=function(){},this.isVidPlayable=function(){return null!=this.vid&&this.vid.readyState>=HTMLMediaElement.HAVE_FUTURE_DATA}}function Bt(t){if(["Precomp","HTMLWidget","Widget"].includes(t.ty))return!0;for(var e=0;e<t.eff.length;e++)if(Vt.indexOf(t.eff[e].ty)<0)return!1;if(t.masks&&0<t.masks.length)return!1;if(Rt.indexOf(t.ty)<0)return!1;if("Text"===t.ty)for(var i=0,s=t.text.txtObj.lines;i<s.length;i++)for(var n=0,r=s[i].parts;n<r.length;n++)if(0<r[n].strokeWidth)return!1;return!(t.is_tm||t.has_tm)}function Ht(t,e){T.call(this);var i=this;this.loaded=!1,this.loadFailed=!1,this.lastUpdateTime=-.5,this.extVol=1,this.vol=Math.pow(10,this.v/10),this.aud=document.createElement("audio"),this.aud.setAttribute("preload","auto"),this.aud.muted=!0,this.aud.preload="auto",this.aud.crossOrigin=q.crossOrigin,1===this.l&&(this.aud.loop=!0),this.aud.addEventListener("canplaythrough",function(){var t;!0!==i.loaded&&(this.pause(),.1<(t=(t=i.ls-i.ps)<=0?0:t)&&(this.currentTime=t),i.loaded=!0)},!1),this.aud.addEventListener("error",function(t){q.reportError("audio_layer_onerror"),i.loaded=!0,i.loadFailed=!0}),this.aud.src=this.url,this.aud.load(),q.isIos()&&this.aud.play(),this.update=function(t,e){e||(t>=this.start&&t<this.end?(this.isInScene=!0,this.displayStat=1):(this.isInScene=!1,this.displayStat=0),t>=this.start&&t<this.end&&this.lastUpdateTime<this.start?(this.shouldInit=!0,this.play(t)):t>=this.end&&this.lastUpdateTime<this.end&&this.pause(t),1===this.displayStat&&(this.vol=Math.pow(10,this.v/10),this.isAudPlayable())&&(e=this.vol*this.extVol,this.aud.volume!==(e=1<e?1:e))&&this.aud.volume,this.lastUpdateTime=t)},this.play=function(t){var e;this.isAudPlayable()&&(t<this.start?(this.aud.pause(),e=this.start/1e3-this.ps,this.aud.currentTime=(e=e<0?0:e)%this.aud.duration):((e=t/1e3-this.ps)<0&&(e=0),.2<Math.abs(this.aud.currentTime-e)&&(this.aud.currentTime=e%this.aud.duration),void 0!==(t=this.aud.play())&&t.then(function(){}).catch(function(t){})))},this.pause=function(t,e){this.isAudPlayable()&&this.aud.pause();var i=this.ls-this.ps;i<=0&&(i=0),(t>this.end||e)&&null!=this.aud&&.2<Math.abs(this.aud.currentTime-i)&&(this.aud.currentTime=i)},this.mute=function(t){this.isAudPlayable()&&(this.aud.muted=t)},this.vol=function(t){this.extVol=t;t=this.vol*this.extVol;1<t&&(t=1),this.isAudPlayable()&&(this.aud.volume=t)},this.draw=function(t){},this.stop=function(){this.displayStat=0,this.isInScene=!1},this.isLoaded=function(){return this.loaded},this.setRate=function(t){this.isAudPlayable()&&(this.aud.playbackRate=t)},this.isAudPlayable=function(){return null!=this.aud&&this.aud.readyState>=HTMLMediaElement.HAVE_FUTURE_DATA}}function Wt(){T.call(this);var t,i=this,s=(this.loaded=!1,this.isPosterLoaded=!1,this.loadFailed=!1,cp_.options&&cp_.options.optionalVideoSlot&&(this.vid=cp_.options.optionalVideoSlot,this.videoCanAutoplay=!!cp_.options.videoCanAutoplay),this.vid=this.vid||document.createElement("video"),this.volumeMultiplier=1,this.video),n=this.vid,r=this.start,e=this.subElm;s.x=s.x||0,s.y=s.y||0,n.muted=cp_.isMute(),this.vidElmIsProxy=void 0===this.vid.removeAttribute,this.loadFootage=function(){var t,e;!i.vidElmIsProxy&&s.url&&((t=document.createElement("source")).src=s.url,t.type="video/mp4",(e=document.createElement("source")).src=s.url.replace(".mp4",".webm"),e.type="video/webm",n.appendChild(t),n.appendChild(e),n.load())},n.addEventListener("canplaythrough",function t(){i.loaded=!0,i.pause();var e=Math.max(0,r-s.ls)/1e3;.1<e&&(i.currentTime=e),n.removeEventListener("canplaythrough",t,!1)},!1),n.addEventListener("error",function(){q.reportError("video_layer_onerror"),i.loaded=!0,i.loadFailed=!0}),this.vidElmIsProxy?s.url?(this.vid.src=s.url,this.vid.load()):i.loaded=!0:(n.setAttribute("webkit-playsinline","webkit-playsinline"),n.setAttribute("playsinline","playsinline"),n.setAttribute("preload","auto"),n.preload="auto",n.crossOrigin=q.crossOrigin,n.loop=1===s.loop,!q.isVpaid()&&this.isHtml&&(n.style.width="100%",n.style.height="100%",e.appendChild(n)),s.url?(e=s.url.replace(/\.mp4$/,"_00001.jpg"),(t=new Image).onload=function(){i.isPosterLoaded=!0},t.src=e,n.poster=e,q.isIos()&&n.play()):i.loaded=!0,q.isVpaid()&&(n.style.opacity=0)),this.footageValidAndLoaded=function(){return!!s.url&&i.loaded&&!i.loadFailed&&null!=n};var a=this.addToScene.bind(this),o=(this.addToScene=function(){q.isVpaid()?this.vidElmIsProxy||(n.style.opacity=1):a()},this.removeFromScene.bind(this));this.removeFromScene=function(){q.isVpaid()?this.vidElmIsProxy||(n.style.opacity=0):o()},this.play=function(t){this.footageValidAndLoaded()&&(t<this.start?(this.vid.pause(),this.updateVideoTime(this.start)):(this.updateVideoTime(t),this.vid.play()))},this.pause=function(t,e){this.footageValidAndLoaded()&&(this.vid.pause(),t>this.end||e||null!=this.vid)&&this.updateVideoTime(t)},this.mute=function(t){this.footageValidAndLoaded()&&i.aEn&&(n.muted=t)},this.vol=function(t){this.footageValidAndLoaded()&&(i.volumeMultiplier=t)},this.updateVideoTime=function(t){t=Math.max(0,(t-s.ls)/1e3);.2<Math.abs(n.currentTime-t)&&(this.vidElmIsProxy?n.setAttribute("currentTime",t+.2):n.currentTime=t)},this.drawContent=function(t){var e;this.updateVideoTime(t),this.isHtml||i.ctx.drawImage(n,-.5*s.w,-.5*s.h,s.w,s.h),i.aEn&&s.al&&(t=(s.al[0]+s.al[1])/2,t=Math.pow(10,t/10),e=Math.min(1,t*i.volumeMultiplier),Math.abs(n.volume-e)/n.volume<.02||(n.volume=Math.min(1,t*i.volumeMultiplier)))},this.stop=function(){this.removeFromScene(),this.displayStat=0,this.isInScene=!1},this.isLoaded=function(t){return t?this.isPosterLoaded:this.loaded},this.setRate=function(t){this.footageValidAndLoaded()&&(this.vid.playbackRate=t)},this.contentNeedRedraw=function(){return!0},this.updateLayerBoundaries=function(){var t=this;t.w=t.video.w,t.h=t.video.h,t.x=t.w/2+t.video.x,t.y=-t.h/2-t.video.y,t.ctx_x_from_center=-t.x,t.ctx_y_from_center=t.y}}function Ut(){T.call(this);var t=!1,e=(this.drawContent=function(){t=!0,this.subElm.innerHTML||FB.insertAndExecute(this.subElm,this.html)},this.isLoaded=function(){return!0},this.contentNeedRedraw=function(){return!t},this.addToScene.bind(this));this.removeFromScene=function(){this.subElm.style.display="none"},this.addToScene=function(){e(),this.subElm.style.display="block"},this.updateLayerBoundaries=function(){var e=this,t=window.movie.comps.find(function(t){return t.id===e.precomp.compId}),i=t.w,t=t.h;e.w=i,e.h=t,e.x=i/2,e.y=-t/2}}function Nt(){var t,s=this,e=(T.call(this),this.image);function n(){return s.footage&&s.footage.url_&&s.footage.isLoaded&&!s.footage.loadFailed}e.ro=e.ro||5,e.bc=e.bc||"0a0a0a0",e.x=e.x||0,e.y=e.y||0,this.loadFootage=function(){e.url_&&(comp.footage[e.url_]||(comp.footage[e.url_]=new qt(e.url_)),this.footage=comp.footage[e.url_],this.img=this.footage.img)},e.url&&(this.footage={loaded:!1},3===e.ro||4===e.ro||5===e.ro&&q.isExtImg(e.url)||e.url.endsWith(".png")?(t=3,4===e.ro?t=1:3===e.ro&&(t=2),e.url_=q.getDynImgUrl(e.url,e.w,e.h,t,e.bc)):e.url_=e.url),this.isLoaded=function(){return!s.footage||s.footage.isLoaded},this.contentNeedRedraw=function(){return-1===this.drawTime},this.drawContent=function(){var t,e,i;s.isHtml?(i=(e=s).subElm,n()?0===i.innerHTML.length&&((t=new THREE.ImageLoader).crossOrigin=q.crossOrigin,(t=t.load(e.footage.url_,function(t){0===i.innerHTML.length&&i.appendChild(t)},null,null)).style.width=e.w+"px",t.style.height=e.h+"px",t.style.display="block",e.image.alt&&(t.alt=e.image.alt),e.image.w<e.w||e.image.h<e.h)&&(i.style.transform="translate("+(e.w-e.image.w)/2+"px,"+(e.h-e.image.h)/2+"px)"):e.drawTime=-1):(e=(t=s).ctx,0!==t.tr.a&&n()?e.drawImage(t.img,-.5*t.image.w,-.5*t.image.h,t.image.w,t.image.h):t.drawTime=-1)},this.updateLayerBoundaries=function(){var t=this;t.w=t.image.w,t.h=t.image.h,t.x=t.w/2+t.image.x,t.y=-t.h/2-t.image.y,t.ctx_x_from_center=-t.x,t.ctx_y_from_center=t.y}}function qt(t){this.url_=t,this.isLoaded=!1,this.loadFailed=!1;var e=this,t=new THREE.ImageLoader;t.crossOrigin=q.crossOrigin,this.img=t.load(this.url_,function(){e.isLoaded=!0},null,function(){e.loadFailed=!0,e.isLoaded=!0;q.reportError("footage_load_error")})}function Xt(){yt.call(this),this.shouldInit=!1,this.mesh=new THREE.Object3D,this.obj3D=new THREE.Object3D,this.obj3D.add(this.mesh),this.isLoaded=function(){return!0},this.draw=function(t){if(this.isInScene)for(var e=0;e<this.children.length;e++)this.children[e].draw(t)}}function Yt(t){var e=this,t=(T.call(this),this.precomp.comp=U(U({},JSON.parse(JSON.stringify(movie.comps.find(function(t){t=t.id;return e.precomp.compId===t})))),{isPrecomp:!0}),t.call(this.precomp.comp),this.precomp.comp.renderer.domElement),i=(this.subElm.appendChild(t),this.subElm.setAttribute("compId",this.precomp.compId),this.precomp.comp.renderer.setSize(this.precomp.comp.w,this.precomp.comp.h),this.drawContent=function(t){t=void 0===this.precomp.timeRemap?t-this.s:1e3*this.precomp.timeRemap;this.precomp.comp.drawFrame(t)},this.isLoaded=function(){return!this.precomp.comp.getFootageStatus().pending.length},this.contentNeedRedraw=function(){return!0},this.loadFootage=function(){this.precomp.comp.loadInitialFootages(),this.precomp.comp.loadAllFootages()},this.updateLayerBoundaries=function(){var t=this.precomp.comp||{},e=t.w,t=t.h;this.w=e,this.h=t,this.x=e/2,this.y=-t/2},this.stop.bind(this));this.stop=function(t){i(t),this.precomp.comp.stop()}}function Zt(){var x=this;T.call(this);for(var t=0;t<this.shape.shapes.length;t++){var e=this.shape.shapes[t],i=this.shape.shapes[t].tr;i&&(i.p=i.p||[0,0],i.s=i.s||[1,1],i.sk=i.sk||0,i.skx=i.skx||0,i.r=i.r||0,i.an=i.an||[0,0],i.a=i.a||1),e.fill=e.fill||null,e.stroke=e.stroke||null}function l(t){t=w(t);return Jt.fromPath(t).reduce(function(t,e){return t+e.getLength()},0)}function c(t,e,i,s){var n=w(t);if(i<.01&&.99<s)return x.createShapePath(e,t);if(!(i<.01&&s<.01||.99<i))for(var t=[n],r=e,n=i,e=s,i=(t=t.map(Jt.fromPath)).flat().reduce(function(t,e){return t+e.getLength()},0),a=i*n,o=i*e,h=0,l=0,c=t;l<c.length;l++){var u=c[l];r.beginPath(),r.moveTo(u[0].p0[0],u[0].p0[1]);for(var p=0,d=u;p<d.length;p++){var f=d[p],m=f.getLength();if(h+m<=a)r.moveTo(f.p3[0],f.p3[1]);else if(h<a&&a<h+m){var v=(a-h)/m,g=Math.max(1,(o-h)/m),v=f.getValueAtLengthPercent(v),g=1===g?1:f.getValueAtLengthPercent(g),y=f.getSubBezier(v,!0),g=(g<1&&(g=v*y.getLength()/f.getLength(),y=f.getSubBezier(g)),f.getPointAtTime(v)),v=g.x,g=g.y;r.moveTo(v,g),y.draw(r)}else{if(!(h+m<=o))return void(v=(o-h)/m,g=f.getValueAtLengthPercent(v),(y=f.getSubBezier(g)).draw(r));f.draw(r)}h+=m}}}function w(t){switch(t.ty){case M.Ellipse:return e=(d=t).p[0],s=d.p[1],_=d.s[0],d=d.s[1],{i:[[-(_/=2)*(b=.55284),0],[0,-(d/=2)*b],[_*b,0],[0,d*b],[-_*b,0]],v:[[e,s-d],[e+_,s],[e,s+d],[e-_,s],[e,s-d]],o:[[_*b,0],[0,d*b],[-_*b,0],[0,-d*b],[_*b,0]]};case M.Polystar:var e=t,i=1===e.type?2*Math.ceil(e.pts):e.pts,s=e.r,n=e.oRad,r=(d=e.p)[0],a=d[1],o=1===e.type?e.iRad:e.oRad,h=2*Math.PI/i,l=s-Math.PI/2,c=[],u=[],p=[],d={i:u,v:c,o:p,c:1},f=r+Math.cos(l)*n,m=a+Math.sin(l)*n;c.push([f,m]);for(var v=0;v<i;v++){var g=v%2?o:n,y=r+Math.cos(l)*g,g=a+Math.sin(l)*g;p.push([0,0]),u.push([0,0]),c.push([y,g]),f=y,m=g,l+=h}return p.push([0,0]),u.unshift([0,0]),d;case M.Rectangle:return _=t.p,b=_[0],_=_[1],x=t.s,w=x[0],x=x[1],{i:[[-(w/=2),0],[0,-(x/=2)],[w,0],[0,x],[-w,0]],v:[[b+w,_-x],[b+w,_+x],[b-w,_+x],[b-w,_-x],[b+w+((null==(b=t.stroke)?void 0:b.w)||0)/2,_-x]],o:[[0,x],[-w,0],[0,-x],[w,0],[0,x]]};case M.Path:return t.path}var x,w,d,e,s,_,b}this.isLoaded=function(){return!0},this.contentNeedRedraw=function(t){return-1===x.drawTime||x.shape.isPropertiesUpdated()},this.createShapePath=function(t,e){switch(e.ty){case"rectangle":var i=t,s=(n=(o=e).p)[0],n=n[1],r=(a=o.s)[0],a=a[1],o=o.r,h=r/2,l=a/2;i.beginPath(),0<o?(.5*(r=Math.min(r,a))<o&&(o=.5*r),i.moveTo(s+h-o,n-l),i.arcTo(s+h,n-l,s+h,n-l+o,o),i.lineTo(s+h,n+l-o),i.arcTo(s+h,n+l,s+h-o,n+l,o),i.lineTo(s-h+o,n+l),i.arcTo(s-h,n+l,s-h,n+l-o,o),i.lineTo(s-h,n-l+o),i.arcTo(s-h,n-l,s-h+o,n-l,o)):(i.moveTo(s-h,n-l),i.lineTo(s+h,n-l),i.lineTo(s+h,n+l),i.lineTo(s-h,n+l)),i.closePath();break;case"ellipse":a=t,o=(r=e).p[0],s=r.p[1],h=r.s[0],r=r.s[1],h/=2,r/=2,n=.55284,a.beginPath(),a.moveTo(o-h,s),a.bezierCurveTo(o-h,s-r*n,o-h*n,s-r,o,s-r),a.bezierCurveTo(o+h*n,s-r,o+h,s-r*n,o+h,s),a.bezierCurveTo(o+h,s+r*n,o+h*n,s+r,o,s+r),a.bezierCurveTo(o-h*n,s+r,o-h,s+r*n,o-h,s),a.closePath();break;case"polystar":l=e,(i=t).translate(l.p[0],l.p[1]),(1===l.type?function(t,e){var i,s,n=.35829,r=t.pts,a=t.r,o=t.oRad,h=t.oRo,l=t.iRad,c=t.iRo,u=(e.beginPath(),a),p=(u-=Math.PI/2,2*Math.PI/r),d=p/2,f=r-parseInt(r);0!=f&&(u+=d*(1-f));var m=0;0!=f?(i=(m=l+f*(o-l))*Math.cos(u),s=m*Math.sin(u),e.moveTo(i,s),u+=p*f/2):(i=o*Math.cos(u),s=o*Math.sin(u),e.moveTo(i,s),u+=d);for(var v=!1,g=parseInt(2*Math.ceil(r)),y=0;y<g;y++){var x,w,_,b,M,T=v?o:l,k=0!=m&&y==g-2?p*f/2:d,C=i,S=s;i=(T=0!=m&&y==g-1?m:T)*Math.cos(u),s=T*Math.sin(u),0==c&&0==h?e.lineTo(i,s):(T=Math.atan2(S,C)-Math.PI/2,w=Math.cos(T),T=Math.sin(T),x=Math.atan2(s,i)-Math.PI/2,b=Math.cos(x),x=Math.sin(x),w=(_=v?l:o)*(M=v?c:h)*n*w,_=_*M*n*T,b=(M=v?o:l)*(T=v?h:c)*n*b,M=M*T*n*x,0!=f&&(0==y?(w*=f,_*=f):y==g-1&&(b*=f,M*=f)),e.bezierCurveTo(C-w,S-_,i+b,s+M,i,s)),u+=k,v=!v}e.closePath()}:function(t,e){for(var i,s,n=t.pts,r=t.r,a=t.oRad,o=t.oRo,h=(e.beginPath(),r),l=(h-=Math.PI/2,2*Math.PI/n),c=(i=a*Math.cos(h),s=a*Math.sin(h),e.moveTo(i,s),h+=l,Math.ceil(n)),u=0;u<c;u++){var p,d,f,m,v=i,g=s;i=a*Math.cos(h),s=a*Math.sin(h),0!=o?(d=Math.atan2(g,v)-Math.PI/2,p=Math.cos(d),d=Math.sin(d),m=Math.atan2(s,i)-Math.PI/2,f=Math.cos(m),m=Math.sin(m),p=a*o*.3*p,d=a*o*.3*d,f=a*o*.3*f,m=a*o*.3*m,e.bezierCurveTo(v-p,g-d,i+f,s+m,i,s)):e.lineTo(i,s),h+=l}e.closePath()})(l,i);break;case"path":bt(t,e.path)}},this.drawContent=function(){if(!x.clk)for(var t=x.ctx,e=null,i=0,s=0;s<x.shape.shapes.length;s++){var n=x.shape.shapes[s];if(n.ty===M.TrimPath)2===(e=n).tpType&&(i=x.shape.shapes.slice(s+1).reduce(function(t,e){return t+l(e)},0));else if(0!==n.tr.a){t.save(),t.translate(this.ctx_x_from_center,this.ctx_y_from_center),h=o=a=r=void 0;var r=t,a=n;if(null!=(a=a.tr)&&(r.globalAlpha=a.a,o=Math.tan(a.sk),h=-o*Math.abs(Math.cos(a.skx)),o=o*Math.abs(Math.sin(a.skx)),r.translate(a.p[0],a.p[1]),r.rotate(a.r),r.transform(1,o,h,1,0,0),r.transform(a.s[0],0,0,a.s[1],0,0),r.translate(-a.an[0],-a.an[1])),e){if(1===e.tpType){if(e.s===e.e){t.restore();continue}c(n,t,e.s,e.e)}else if(2===e.tpType){var o=x.shape.shapes.slice(s+1).reduce(function(t,e){return t+l(e)},0),h=l(n),r=i*e.s,a=i*e.e,r=e.s<.01?0:Math.max(0,Math.min(1,(r-o)/h)),a=.99<e.e?1:Math.max(0,Math.min(1,(a-o)/h));if(r===a){t.restore();continue}c(n,t,r,a)}}else x.createShapePath(t,n);o=t.globalAlpha;null!=n.fill&&(Mt(n.fill,t),t.fill()),null!=n.stroke&&0<n.stroke.w&&(t.globalAlpha=o,Tt(n.stroke,t),n.stroke.align?1===n.stroke.align?(t.clip(),t.lineWidth=2*n.stroke.w,t.stroke()):2===n.stroke.align&&(h=St(t),x.createShapePath(h,n),Tt(n.stroke,h),h.lineWidth=2*n.stroke.w,h.stroke(),h.globalCompositeOperation="destination-out",h.fill(),r=t.getTransform(),t.resetTransform(),t.drawImage(h.canvas,0,0),t.setTransform(r)):t.stroke()),t.restore()}}},this.getInitialEdgeVertices=function(t){var e=this.getShapeBoundaries(t);if(t.stroke&&!(t.stroke.w<=0)){var i=t.stroke.w;switch(null==(t=t.stroke)?void 0:t.align){case 1:break;case 2:s(i*Math.sqrt(2));break;default:s(i*Math.sqrt(2)/2)}}return e;function s(t){e.bottom+=t,e.top-=t,e.left-=t,e.right+=t}},this.getShapeBoundaries=function(t){var e=t.p,e=void 0===e?[0,0]:e,i=e[0],s=e[1],e=t.s,e=void 0===e?[0,0]:e,n=e[0],r=e[1];switch(t.ty){case M.Rectangle:case M.Ellipse:return{left:i-n/2,top:s-r/2,right:i+n/2,bottom:s+r/2};case M.Path:var a=t.path,o=a.i,h=a.o,l=a.v,a=a.c,c=l.map(function(t){return{x:[t[0]],y:[t[1]]}});return a&&(a=[0,1].map(function(t){var i=l.length-1,e=l[i],s=l[i].map(function(t,e){return+t+ +h[i][e]}),n=l[0].map(function(t,e){return+t+ +o[0][e]}),r=l[0];return new Jt(e,s,n,r).getBoundaries(t)}),c.push({x:a[0],y:a[1]})),c.push.apply(c,l.slice(1).map(function(t,r){var e=[0,1].map(function(t){var e=l[r],i=l[r].map(function(t,e){return+t+ +h[r][e]}),s=l[r+1].map(function(t,e){return+t+ +o[r][e]}),n=l[r+1];return new Jt(e,i,s,n).getBoundaries(t)});return{x:e[0],y:e[1]}})),c.reduce(function(t,e){var i=t.left,s=t.right,n=t.top,t=t.bottom,r=e.x,e=e.y;return{left:Math.min.apply(Math,N([i],r,!1)),right:Math.max.apply(Math,N([s],r,!1)),top:Math.min.apply(Math,N([n],e,!1)),bottom:Math.max.apply(Math,N([t],e,!1))}},{left:1/0,right:-1/0,top:1/0,bottom:-1/0});case M.Polystar:var a=t.p,c=a[0],a=a[1],u=t.oRad;return{left:c-u,right:c+u,top:a-u,bottom:a+u};default:return{left:0,top:0,right:800,bottom:800}}},this.updateLayerBoundaries=function(){var p=this,t=this,e=t.shape.shapes.map(function(t){var e,i,s,n,r,a,o,h,l,c,u;return"trimpath"===t.ty?null:(c=(u=(o=t.tr).an)[0],u=u[1],r=(a=void 0===(a=o.p)?[0,0]:a)[0],a=a[1],h=(l=void 0===(l=o.s)?[0,0]:l)[0],l=l[1],o=void 0===(o=o.r)?0:o,e=(t=p.getInitialEdgeVertices(t)).left,i=t.top,s=t.right,t=t.bottom,n=(new DOMMatrix).translateSelf(r,a).rotateSelf(0,0,o/Math.PI*180).skewXSelf(0).skewYSelf(0).scaleSelf(h,l).translateSelf(-c,-u),a=(r=[[i,e],[i,s],[t,e],[t,s]].map(function(t){var e=t[0],t=t[1];return new DOMPoint(t,e).matrixTransform(n)}))[0],o=r[1],h=r[2],l=r[3],c=[a.x,o.x,h.x,l.x],u=[a.y,o.y,h.y,l.y],{left:Math.min.apply(Math,c),right:Math.max.apply(Math,c),top:Math.min.apply(Math,u),bottom:Math.max.apply(Math,u)})}).filter(function(t){return!!t}),i=Math.min.apply(Math,e.map(function(t){return t.left})),s=Math.max.apply(Math,e.map(function(t){return t.right})),n=Math.min.apply(Math,e.map(function(t){return t.top})),e=Math.max.apply(Math,e.map(function(t){return t.bottom}));t.w=Math.ceil(s-i+20),t.h=Math.ceil(e-n+20),t.x=Math.floor(i+t.w/2-10),t.y=Math.floor(-n-t.h/2+10),t.ctx_x_from_center=-t.x,t.ctx_y_from_center=t.y}}var Jt=function(){function n(t,e,i,s){this.accuracy=100,this.lengthsArr=null,this.length=null,this.p0=t,this.p1=e,this.p2=i,this.p3=s}return n.prototype.getValueAtTime=function(t,e){return Math.pow(1-t,3)*this.p0[e]+Math.pow(1-t,2)*t*3*this.p1[e]+(1-t)*Math.pow(t,2)*3*this.p2[e]+Math.pow(t,3)*this.p3[e]},n.prototype.getPointAtTime=function(t){return{x:this.getValueAtTime(t,0),y:this.getValueAtTime(t,1)}},n.prototype.getLength=function(){if(!this.length){this.lengthsArr||(this.lengthsArr=[]);var t=this.getPointAtTime(0);this.length=0;for(var e=1;e<=this.accuracy;e++){var i=e/this.accuracy,i=this.getPointAtTime(i),s=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2));this.length+=s,this.lengthsArr.push(s),t=i}}return this.length},n.prototype.getValueAtLengthPercent=function(t){this.length&&this.lengthsArr||this.getLength();for(var e=this.length*t,i=0,s=0;s<this.accuracy;s++){var n=this.lengthsArr[s];if(e<=(i+=n))return(s+(i-e)/n)/this.accuracy}return 1},n.prototype.getCriticalPointsByDimension=function(t){var e=-3*this.p0[t]+9*this.p1[t]-9*this.p2[t]+3*this.p3[t],i=6*this.p0[t]-12*this.p1[t]+6*this.p2[t],s=-3*this.p0[t]+3*this.p1[t],n=(-i+Math.sqrt(Math.pow(i,2)-4*e*s))/2*e,i=(-i-Math.sqrt(Math.pow(i,2)-4*e*s))/2*e,s=[this.p0[t],this.p3[t]];return isNaN(n)||s.push(n),isNaN(n)||s.push(i),s},n.prototype.getCriticalPoints=function(){return{x:this.getCriticalPointsByDimension(0),y:this.getCriticalPointsByDimension(1)}},n.prototype.getSubBezierByDim=function(t,e,i){var s=(1-t)*this.p0[e]+t*this.p1[e],n=(1-t)*this.p1[e]+t*this.p2[e],r=(1-t)*this.p2[e]+t*this.p3[e],a=(1-t)*s+t*n,n=(1-t)*n+t*r,t=(1-t)*a+t*n;return i?[t,n,r,this.p3[e]]:[this.p0[e],s,a,t]},n.prototype.getSubBezier=function(t,e){var i=this.getSubBezierByDim(t,0,e),t=this.getSubBezierByDim(t,1,e);return new n([i[0],t[0]],[i[1],t[1]],[i[2],t[2]],[i[3],t[3]])},n.prototype.draw=function(t){t.bezierCurveTo(this.p1[0],this.p1[1],this.p2[0],this.p2[1],this.p3[0],this.p3[1])},n.prototype.getBoundaries=function(t){var e=-3*this.p0[t]+9*this.p1[t]+-9*this.p2[t]+3*this.p3[t],i=6*this.p0[t]-12*this.p1[t]+6*this.p2[t],s=-3*this.p0[t]+3*this.p1[t],n=(-i+Math.sqrt(Math.pow(i,2)-4*e*s))/(2*e),i=(-i-Math.sqrt(Math.pow(i,2)-4*e*s))/(2*e),s=this.getValueAtTime(Math.min(1,Math.max(0,n)),t),e=this.getValueAtTime(Math.min(1,Math.max(0,i)),t),n=[];return isNaN(s)||n.push(s),isNaN(e)||n.push(e),n},n.fromPath=function(s){var t,e=s.v.slice(1).map(function(t,e){var i=t[0],t=t[1];return new n(s.v[e],[s.o[e][0]+s.v[e][0],s.o[e][1]+s.v[e][1]],[s.i[e+1][0]+i,s.i[e+1][1]+t],[i,t])});return s.c&&(t=s.v.length-1,e.push(new n([s.v[t][0],s.v[t][1]],[s.v[t][0]+s.o[t][0],s.v[t][1]+s.o[t][1]],[s.v[0][0]+s.i[0][0],s.v[0][1]+s.i[0][1]],[s.v[0][0],s.v[0][1]]))),e},n}(),Qt=["alphabetic","top","hanging","middle","ideographic","bottom"];function $t(){var R=this,s=(T.call(this),cp_.containerDiv.ownerDocument),H=/[\u4E00-\u9FFF]/,w=(R.isHtml||(s=document),!1);function h(t,e){for(var i=0;i<t.parts.length;i++){var s=t.parts[i];s.w_*=e,s.size_use*=e,s.font_=q.getCtxFont(s.style,s.weight,s.size_use,s.family),s.x_*=e,s.y_*=e}t.h_*=e,t.w_*=e}function W(s){for(var a=[],t=function(e){for(var n=s.findIndex(function(t){return t===e}),r=(a[n]=U(U({},e),{parts:[]}),[]),t=0,i=e.parts;t<i.length;t++)!function(i){var s=i.text.split(/\s/g);s.forEach(function(t,e){e<s.length-1?(r.push(U(U({},i),{text:s[e]+" "})),a[n].parts.push(r),r=[]):s[e]&&(r.push(U(U({},i),{text:s[e]})),H.test(s[e]))&&(a[n].parts.push(r),r=[])})}(i[t]);r.length&&a[n].parts.push(r)},e=0,i=s;e<i.length;e++)t(i[e]);return a}q.loadFonts(R.text.txtObj.fonts),R.text.aeSrcTxt.isBoxText=null!=R.text.aeSrcTxt.boxTxtS,this.isLoaded=function(){if(s.fonts&&s.fonts.load){for(var t=0,e=R.text.txtObj.fonts;t<e.length;t++){var i=e[t],i=q.getCtxFont(i.italic,i.weight,10,i.family);if(!s.fonts.check(i))return s.fonts.load(i),!1}return w=!0}return!1},this.contentNeedRedraw=function(){return-1===R.drawTime||!!R.text.isPropertiesUpdated&&R.text.isPropertiesUpdated()},this.drawContent=function(){var t=R,e=t.subElm;e.style.webkitFontSmoothing="antialiased",t.isHtml||(t.ctx.save(),t.ctx.translate(t.ctx_x_from_center,t.ctx_y_from_center));try{var i,s=t,n=t.ctx,r=e,a=s.text.linesToDraw,o=Math.max.apply(Math,a.map(function(t){return t.h_}));s.isHtml?i="":n.textBaseline=Qt[0],adParams.drawDebugBoxes&&(n?(n.rect(0,0,R.text.textBox.w,R.text.textBox.h),n.lineWidth=2,n.strokeStyle="#fab400",n.setLineDash([6,14]),n.stroke(),n.setLineDash([])):i+='<div style="position: absolute;width:'+R.text.textBox.w+"px;height:"+R.text.textBox.h+'px;outline: 2px dashed #fab400;outline-offset:-2px;"></div>');for(var h=0;h<a.length;h++)for(var l=a[h],c=0;c<l.parts.length;c++){var u,p,d,f,m,v,style,g,y=l.parts[c],x=(+y.letterSpacing||0)*y.size_use/1e3;n?(x&&(n.canvas.style.letterSpacing=x+"px",u=n.getTransform(),(n=n.canvas.getContext("2d")).setTransform(u)),n.font=y.font_,n.fillStyle=y.color,y.strokeWidth&&(n.strokeStyle=y.strokeColor,n.lineWidth=y.strokeWidth),0<y.strokeWidth&&!y.strokeOverFill&&n.strokeText(y.text,y.drawX,y.drawY),n.fillText(y.text,y.drawX,y.drawY),0<y.strokeWidth&&y.strokeOverFill&&n.strokeText(y.text,y.drawX,y.drawY),y.strikeThrough&&n.fillRect(y.drawX,y.drawY-(.5*y.size_use+y.strikeThrough)/2,y.w_,y.strikeThrough)):(u=parseInt(o),p=y.drawY-o,d=y.drawX,f=parseInt(y.size_use),m=y.text,v=y.weight,style=y.style,g=y.strikeThrough?"text-decoration:line-through ".concat(y.strikeThrough,"px;"):"",i+='<div data-w="'+y.w_+'" style="position: absolute;width:100%;height:'+u+"px;top:"+p+"px;left:"+d+'px"><div style="height:'+u+"px;font-size: "+f+"px;letter-spacing:"+x+"px;line-height: "+f+"px;overflow: visible;white-space: nowrap;text-overflow: visible;color:"+y.color+";font-weight:"+v+";font-style:"+style+";"+g+"font-family:'"+y.family+"';\">"+q.htmlEncode(m)+'<div style="height: '+u+'px;display: inline-block;"></div></div></div>')}s.isHtml&&(r.innerHTML=i,r.style.overflow="visible")}catch(t){q.reportExceptionError("text_layer_draw",t)}t.isHtml||t.ctx.restore(),w||(R.drawTime=-1)},this.calcPartsAndLinesWidthAndHeight=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.w_=0;for(var s=i.h_=0;s<i.parts.length;s++){var n=i.parts[s],r=n.text;adParams.rtl&&(r=""+r+""),n.text=r,n.size_use=parseInt(n.size),n.font_=q.getCtxFont(n.style,n.weight,n.size_use,n.family),n.w_=q.measureText(n.text,n.family,n.size_use,n.weight,n.style,n.letterSpacing||0,s<i.parts.length-1),n.x_=n.x_shift,n.y_=n.y_shift,i.w_+=n.w_,n.size_use>i.h_&&(i.h_=n.size_use)}}},this.calcPartsDrawPositions=function(t,e){if(0!==t.length)for(var i=function(t,e,i){var s;void 0===i&&(i=gt.Top);var n=R.getActualDrawingHeight(e),r=t-n,a=R.text.aeSrcTxt.isBoxText?.7*(null==(t=e[0])?void 0:t.h_):.7*R.text.aeSrcTxt.size;switch(i){case gt.Top:return a;case gt.Center:return Math.abs(r/2)+.7*(null==(s=e[0])?void 0:s.h_);case gt.Bottom:return r+.7*(null==(s=e[0])?void 0:s.h_)}}(R.text.textBox.h,t,R.text.txtObj.verticalAlign),s=0;s<t.length;s++){var n=t[s],r={l:"left",r:"right",c:"center",o:e.justif.toLowerCase()}[n.align],a=0,o=0,h=1,l=1;"center"===r?a=R.text.textBox.w/2-n.w_/2:"right"===r&&(a=R.text.textBox.w,o=n.parts.length-1,h=l=-1);for(var c,u=0;u<n.parts.length;u++){var p=n.parts[o+h*u];p.drawX="right"===r?a-p.w_+p.x_:a+p.x_,p.drawY=i+p.y_,a+=l*p.w_}s<t.length-1&&(c=t[s+1],i+=n.h_*n.lead*.3+c.h_*c.lead*.7)}},this.resizeOverflowingLines=function(t){for(var e=0,i=t;e<i.length;e++){var s,n,r=i[e];r.w_>R.text.textBox.w&&(s=R.getMinAllowedScale([r]),n=R.text.textBox.w/r.w_,h(r,n=Math.max(n,s)))}},this.globalResizeForOverflow=function(t){var e=R.getMinAllowedScale(t),i=Math.max(e,Math.min.apply(Math,t.map(function(t){return R.text.textBox.w/t.w_})));if(i<1)for(var s=0,n=t;s<n.length;s++)h(n[s],i)},this.resizeOverflowingHeight=function(t){var e=R.text,i=e.aeSrcTxt,e=e.textBox,s=R.getActualDrawingHeight(t),n=R.getMinAllowedScale(t),r=i.isBoxText?e.h/s:(e.h-.7*i.size)/(s-.7*(null==(e=t[0])?void 0:e.h_));if((r=Math.max(r,n))<1)for(var a=0,o=t;a<o.length;a++)h(o[a],r)},this.applyAnimators=function(t,e){if(null!=e&&e.length)for(var i=0,s=e;i<s.length;i++)for(var n=s[i],r=n.fillColor,a=n.opacity,o=0,h=n.rangeSelectors;o<h.length;o++){var l=h[o],c=l.start,u=l.end,p=l.units,d=l.offset,f=l.basedOn,l=l.smoothness,m=function(t,e){switch(e){case x.Char:return t.reduce(function(t,e){return t+e.parts.flatMap(function(t){return t.text.split("")}).length},0);case x.CharWithoutSpace:return t.reduce(function(t,e){return t+e.parts.flatMap(function(t){return t.text.match(/\s*[^\s]\s*/g)}).length},0);case x.Word:return t.reduce(function(t,e){return t+e.parts.flatMap(function(t){return t.text.match(/\s*[^\s]+\s*/g)}).length},0);case x.Line:return t.length}}(t,f);m=m,d=d,c=c,u=u,l=l/100,(p=p)===vt.Percent&&(c=m*c/100,u=m*u/100,d=m*d/100),c+=d,u+=d,p=[],1<=Math.floor(c)&&p.push({offset:Math.floor(c),effect:0}),0<l&&1-l<c%1&&(m=1-(c%1-(1-l))/l,p.push({offset:Math.max(0,Math.floor(c)+1),effect:m})),Math.floor(u)>Math.floor(c)&&p.push({offset:Math.max(0,Math.floor(u)),effect:1}),!function(t,s,n){t.forEach(function(t){var e=t.part,i=t.effect;e.text&&(e.color||(e.color="#000000"),t=e.color.startsWith("rgba")?e.color.replace(/rgba\((.+)\)/,"$1").split(",").map(function(t){return+t}):Kt(e.color),(t=s?t.map(function(t,e){return Math.round(t+(s[e]-t)*i)}):t).push(1),void 0!==n&&(t[3]*=1-(1-n/100)*i),e.color=Ct(t))})}(v(t,p,f),r,a)}function v(l,c,t){var u=0,p=0,d=[];function e(t){for(var e=0,i=l;e<i.length;e++)for(var s=i[e],n=0;n<s.parts.length;n++){var r=s.parts[n],a=c[p];if(!a)break;var o=r.text.match(t),h=(null==o?void 0:o.length)||0;u+h<=a.offset?(a.effect&&d.push({part:r,effect:a.effect}),u+h===a.offset&&p++,u+=h):(s.parts.splice(n+1,0,U(U({},r),{text:o.slice(a.offset-u).join("")})),r.text=o.slice(0,a.offset-u).join(""),a.effect&&d.push({part:r,effect:a.effect}),u+=a.offset-u,p++)}}switch(t){case x.Char:e(/./gs);break;case x.CharWithoutSpace:e(/\s*[^\s]\s*/gs);break;case x.Word:e(/\s*[^\s]+\s*/gs);break;case x.Line:for(var u=1,i=0;i<l.length;i++)if("break"===function(t){var e=c[p],t=l[t];if(!e)return"break";e.effect&&d.push.apply(d,t.parts.map(function(t){return{part:t,effect:e.effect}})),u===e.offset&&p++,u++}(i))break}return d}},this.removeTrailingSpaces=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e],n=s.parts.length;0<n&&((s=s.parts[n-1]).text=s.text.replace(/\s+$/,""))}},this.getMinAllowedScale=function(t){return(R.text.txtObj.minFontSize||5)/t.reduce(function(t,e){return e.parts.reduce(function(t,e){e=e.size;return Math.min(t,e)},t)},1/0)},this.wrapLinesToDrawAndScaleDownFontSizeToFitBox=function(t,e,i){if(!t.text||!e)return[];for(var s=t.text,n=s.aeSrcTxt,r=1,a=[],o=R.getMinAllowedScale(e);o<=r;){var h=0,l=W(e),a=[],c=void 0,u=0,p=!1,d=t.text.textBox.w;for(i.HScaleUse98&&(d*=.98);c=l.shift();){for(var f=0,m=0,v=0;v<c.parts.length;v++){for(var g=0,y=0,x=0,w=0,_=c.parts[v];w<_.length;w++){var b=_[w],M=b.size,T=b.text,k=b.weight,C=b.style,S=b.letterSpacing,P=void 0===S?0:S,E=b.family,S=M*r,f=Math.max(S,f),b=(y+=q.measureText(T,E,S,k,C,P),i.HScaleUse98?T:T.replace(/\s+$/,""));g+=q.measureText(b,E,S,k,C,P),x=P*M/1e3}if(d<m+g){if(0===m){if(r<=o||H.test(c.parts[v][0].text)){for(var z=c.parts[v],D=0,j=!1,I=z.length-1;0<=I;I--){for(var A=z[I],O=A.text,M=A.size,E=A.family,V=A.style,k=A.weight,P=A.letterSpacing,L=O.length-1;0<L;L--)if(y-D-q.measureText(O.substring(L),E,M*r,k,V,P)<=d){a.push(U(U({},c),{parts:N(N([],c.parts[v].slice(0,I),!0),[U(U({},c.parts[v][I]),{text:O.substring(0,L)})],!1)})),l.unshift(U(U({},c),{parts:N([N([U(U({},c.parts[v][I]),{text:O.substring(L)})],c.parts[v].slice(I+1),!0)],c.parts.slice(v+1),!0)})),j=!0;break}if(j)break;D+=q.measureText(O,E,M*r,k,V,P)}break}p=!0;break}var F=c.parts[v-1],F=F[F.length-1];F.text=F.text.replace(/\s+/g,""),a.push(U(U({},c),{parts:c.parts.slice(0,v).flat()})),l.unshift(U(U({},c),{parts:c.parts.slice(v)}));break}m+=y+x,v>=c.parts.length-1&&a.push(U(U({},c),{parts:c.parts.flat()}))}if(p)break;h+=h?u*a[a.length-1].lead*.3+f*c.lead*.7:.7*(n.isBoxText?f:n.size),u=f}if(!p&&(i.noVerticalScaleDownToFitHeight||h<=s.textBox.h))break;if(p=!1,r===o)break;r=Math.max(r-.05,o)}return this.combineSimilarParts(a),a.forEach(function(t){return t.parts.forEach(function(t){t.size*=r,t.x_shift*=r,t.y_shift*=r})}),a},this.combineSimilarParts=function(t){for(var s=["color","size","style","weight","x_shift","y_shift","letterSpacing","strikeThrough","family"],e=0,i=t;e<i.length;e++){for(var n=i[e],r=[],a=0,o=n.parts;a<o.length;a++)!function(e){var i=r[r.length-1];i&&s.every(function(t){return e[t]===i[t]})?i.text+=e.text:r.push(e)}(o[a]);n.parts=r}return t},this.getActualDrawingHeight=function(r){return r.reduce(function(t,e,i){var s,n=e.h_,e=e.lead;return 0===i?.7*(null==(s=r[0])?void 0:s.h_):t+n*e*.7+r[i-1].h_*r[i-1].lead*.3},0)},this.trimOverflowedHeight=function(t){if(t.length){var e=R.text,i=e.aeSrcTxt,s=e.textBox,n=i.isBoxText?s.h:s.h-.7*i.size+.7*(null==(e=t[0])?void 0:e.h_);if(!(R.getActualDrawingHeight(t)-n<.1)){for(;t.pop(),R.getActualDrawingHeight(t)>n;);for(var r,a=t[t.length-1],o=a.parts[a.parts.length-1],h=a.w_,l="...",c=q.measureText(l,o.family,o.size_use,o.weight,o.style,o.letterSpacing||0);h-o.w_+c>s.w;)h-=o.w_,a.parts.pop(),o=a.parts[a.parts.length-1],c=q.measureText(l,o.family,o.size_use,o.weight,o.style,o.letterSpacing||0);for(;(r=q.measureText(o.text+l,o.family,o.size_use,o.weight,o.style,o.letterSpacing||0))>s.w;)o.text=o.text.substring(0,o.text.length-1);o.text+=l,o.w_=r}}},this.scaleDownFontSizeToFitBoxNoWrap=function(t,e){var i,s=R.text.txtObj.globalScale;e.noVerticalScaleDownToFitHeight||R.resizeOverflowingHeight(t),s?R.globalResizeForOverflow(t):R.resizeOverflowingLines(t),e.legacyYCorrectionComplexTextBoxTxt&&0<t.length&&R.isHtml&&(i=Math.max.apply(Math,t.map(function(t){return t.h_}))-t[0].h_,t.forEach(function(t){t.parts.forEach(function(t){t.y_+=i})}))},this.updateLinesToDraw=function(){var t,e=this,i=e.text,s=i.aeSrcTxt,n=i.animators,i=i.txtObj,r=i.allCaps,a=i.wrapText,o=i.lines,h=i.features;r&&o.forEach(function(t){t.parts.forEach(function(t){t.text=t.text.toUpperCase()})}),a?(t=e.wrapLinesToDrawAndScaleDownFontSizeToFitBox(e,o,h),e.removeTrailingSpaces(t),e.applyAnimators(t,n),this.combineSimilarParts(t),e.calcPartsAndLinesWidthAndHeight(t,s)):(t=JSON.parse(JSON.stringify(o)),e.removeTrailingSpaces(t),e.applyAnimators(t,n),this.combineSimilarParts(t),e.calcPartsAndLinesWidthAndHeight(t,s),e.scaleDownFontSizeToFitBoxNoWrap(t,h)),i.features.noTrimOverflowedHeight||e.trimOverflowedHeight(t),e.calcPartsDrawPositions(t,s),e.text.linesToDraw=t},this.updateLayerBoundaries=function(){for(var t=this,e=t.text.textBox,i=(t.updateLinesToDraw(),t.w=e.w,t.h=e.h,t.x=t.w/2+e.x,t.y=-t.h/2-e.y,0),s=0,n=e.w,r=e.h,a=0,o=t.text.linesToDraw;a<o.length;a++)for(var h=0,l=o[a].parts;h<l.length;h++){var c=l[h],u=c.drawX,p=c.drawX+c.w_,d=c.drawY-+c.size_use,c=c.drawY+.5*c.size_use;u<i&&(i=u),n<p&&(n=p),d<s&&(s=d),r<c&&(r=c)}t.wx=2*Math.max(-i,n-t.w),t.hx=2*Math.max(-s,r-t.h),t.ctx_y_from_center=-t.h/2,t.ctx_x_from_center=-t.w/2}}function Kt(t){t=t.match(/[\da-fA-F]{2}/g).map(function(t){return parseInt(t,16)});return 3<t.length&&(t[3]/=255),t}function Gt(){("Shape"===this.originalType?Zt:T).call(this),this.script=document.createElement("script"),this.script.setAttribute("data-args",JSON.stringify(this.widget.args)),this.script.src=this.widget.scriptUrl,this.loadFonts=function(){var t=Object.values(this.widget.args).filter(function(t){return"Font"===(null==t?void 0:t.type)});q.loadFonts(t)},this.loadFonts();var t,e=!1,i=(this.drawContent=function(){e=!0,this.subElm.style.webkitFontSmoothing="antialiased",this.subElm.innerHTML||this.subElm.appendChild(this.script)},this.isLoaded=function(){return!0},this.contentNeedRedraw=function(){return!e},this.removeFromScene=function(){this.subElm.style.display="none"},this.addToScene.bind(this)),s=(this.addToScene=function(){i(),this.subElm.style.display="block"},null==(t=this.updateLayerBoundaries)?void 0:t.bind(this));this.updateLayerBoundaries=function(){var t=this;switch(t.originalType){case"Text":var e=t.text.textBox;t.w=e.w,t.h=e.h,t.x=t.w/2+e.x,t.y=-t.h/2-e.y;break;case"Image":t.w=t.image.w,t.h=t.image.h,t.x=t.w/2,t.y=-t.h/2;break;case"Video":t.w=t.video.w,t.h=t.video.h,t.x=t.w/2,t.y=-t.h/2;break;case"Shape":s(),t.w-=20,t.h-=20;break;case"Precomp":var e=this.precomp.comp||{},i=e.w,e=e.h;t.w=i,t.h=e,t.x=i/2,t.y=-e/2}}}function te(t,i){ee.call(this);var s=this;this.applyCameraTransform=function(){var t=this.camera;t.position.set(this.cameraObj.p[0],-this.cameraObj.p[1],-this.cameraObj.p[2]),this.cameraObj.t?(t.lookAt(new THREE.Vector3(this.cameraObj.an[0],-this.cameraObj.an[1],-this.cameraObj.an[2])),this.cameraObj.o&&(0!==this.cameraObj.o[0]&&t.rotateX(this.ox),0!==this.cameraObj.o[1]&&t.rotateY(-this.oy),0!==this.cameraObj.o[2])&&t.rotateZ(-this.oz)):this.cameraObj.o&&t.rotation.set(this.cameraObj.o[0],-this.cameraObj.o[1],-this.cameraObj.o[2]),0!==this.cameraObj.rx&&t.rotateX(this.cameraObj.rx),0!==this.cameraObj.ry&&t.rotateY(-this.cameraObj.ry),0!==this.cameraObj.rz&&t.rotateZ(-this.cameraObj.rz)},this.update=function(t,e){for(var i=0;i<this.children.length;i++)this.children[i].update(t,e);this.cameraObj.isPropertiesUpdated()&&this.applyCameraTransform(),this.lastTime=t},this.draw=function(t,e){for(var i=0;i<this.children.length;i++)this.children[i].draw(t)},this.play=function(t){for(var e=0;e<this.l.length;e++)"Video"!==this.l[e].ty&&"Audio"!==this.l[e].ty||this.l[e].play(t)},this.setRate=function(t){for(var e=0;e<this.l.length;e++)"Video"!==this.l[e].ty&&"Audio"!==this.l[e].ty||this.l[e].setRate(t)},this.pause=function(t,e){for(var i=0;i<this.l.length;i++)"Video"!==this.l[i].ty&&"Audio"!==this.l[i].ty||this.l[i].pause(t,e)},this.stop=function(){for(var t=0;t<this.l.length;t++)this.l[t].stop();this.lastTime=-999999},this.goTo=function(t,e){if(s.stop(),s.drawFrame(t,e),e)for(var i=0;i<this.l.length;i++)"Video"!==this.l[i].ty&&"Audio"!==this.l[i].ty||this.l[i].pause(t)},this.mute=function(t){for(var e=0;e<this.l.length;e++)this.l[e].mute!==i&&this.l[e].mute(t)},this.vol=function(t){for(var e=0;e<this.l.length;e++)this.l[e].vol!==i&&this.l[e].vol(t)},this.loadAllFootages=function(){for(var t=0,e=s.l;t<e.length;t++){var i=e[t];i.loadFootage&&0<i.start&&i.loadFootage()}},this.loadInitialFootages=function(){for(var t=0,e=s.l;t<e.length;t++){var i=e[t];i.loadFootage&&i.start<=0&&i.loadFootage()}},this.getFootageStatus=function(t){try{for(var e=[],i=0;i<this.l.length;i++){var s=this.l[i];if(!(t&&0<s.start)&&!s.isLoaded(t))switch(s.ty){case"Image":e.push(s.image.url);break;case"Text":e.push("font: "+s.text.aeSrcTxt.fontFamily+" "+s.text.aeSrcTxt.weight);break;case"Precomp":e.push.apply(e,s.precomp.comp.getFootageStatus().pending);break;case"Video":e.push(s.video.url);break;case"Audio":e.push(s.audio.url)}}return{pending:e,failed:[]}}catch(t){return q.reportExceptionError("getFootageStatus",t),{pending:[],failed:[]}}},this.getCameraLayerAtTime=function(t){for(var e=0;e<this.l.length;e++)if("Camera"===this.l[e].ty&&this.l[e].s>=t&&this.l[e].s<=t)return this.l[e];return 0},this.footage={},comp.l=comp.l.filter(function(t){function s(t){return!t.en&&!t.is_tm}return s(t)&&(t.ty="Null"),!function t(e){return s(e)&&(i=e.i,comp.l.filter(function(t){return+t.pi===i}).every(t));var i}(t)}).sort(function(t,e){return t.is_tm?-1:e.is_tm?1:+e.i-t.i});for(var e=0;e<s.l.length;e++)switch((s.l[e].comp=s).l[e].ty){case"Null":Xt.call(s.l[e]);break;case"Image":Nt.call(s.l[e]);break;case"Text":$t.call(s.l[e]);break;case"Shape":Zt.call(s.l[e]);break;case"Precomp":Yt.call(s.l[e],te);break;case"Video":Wt.call(s.l[e]);break;case"Audio":Ht.call(s.l[e]);break;case"HTMLWidget":Ut.call(s.l[e]);break;case"Widget":Gt.call(s.l[e])}this.children=[];for(var n=0;n<this.l.length;n++)if(this.l[n].pi===i)this.children.push(this.l[n]),this.l[n].parent=null;else for(e=0;e<this.l.length;e++)if(this.l[e].i==this.l[n].pi){this.l[n].parent=this.l[e],this.l[e].children.push(this.l[n]);break}for(e=0;e<this.l.length;e++)this.l[e].sceneStart=this.l[e].getEaliestStart(),this.l[e].sceneEnd=this.l[e].getLatestEnd();this.clickableLayers_=[];for(e=0;e<this.l.length;e++)this.l[e].clk&&this.clickableLayers_.push(this.l[e]);this.scene=new THREE.Scene,this.renderer=new THREE.CSS3DRenderer({w:this.w,h:this.h}),this.renderer.domElement.style.cssText="position:absolute;z-index:0;top:0px;left:0px;overflow:hidden;opacity:1;background-color:transparent";var r=((1<<24)+(parseInt(255*this.bgC[0])<<16)+(parseInt(255*this.bgC[1])<<8)+parseInt(255*this.bgC[2])).toString(16).slice(1),r=(this.bgA=this.bgA||1,this.isPrecomp||adParams.custom.isVpaid||this.renderer.setClearColor(r,this.bgA),this.cameraObj=this.getCameraLayerAtTime(0)||new ie(this),2*Math.atan(this.h/(2*this.cameraObj.zo))*(180/Math.PI)),a=this.w/this.h;this.camera=new THREE.PerspectiveCamera(r,a,1e4),this.camera.near=.1*this.cameraObj.zo,this.camera.far=4*this.cameraObj.zo,this.camera.updateProjectionMatrix(),this.screenObj=new THREE.Object3D,this.camera.add(this.screenObj),this.screenObj.position={x:.5*-this.w,y:.5*this.h,z:-this.cameraObj.zo},this.scene.add(this.camera),this.drawFrame=function(t,e){try{this.update(t,e),this.renderer.render(this.scene,this.camera),this.draw(t)}catch(t){q.reportExceptionError("drawFrame",{adParams:JSON.stringify(adParams),stage:"",exception:JSON.stringify(t)})}}.bind(this),this.parentPlayer=t,this.lastTime=-999999}function ee(){var t,e=this,a=[],o=[],i=!1;for(t in this)if(this[t]instanceof Array)for(var s=this[t],n=0;n<s.length;n++)"object"==typeof s[n]&&ee.call(s[n])&&o.push(s[n]);else if("object"==typeof this[t]){var r,h=this[t];if(null!=h)if(h.k&&h.k instanceof Array)i=!0,h="path"==t?j.ShapePropertyFactory.getShapeProp(h):j.PropertyFactory.getProp(h),a.push({key:t,data:h});else if(h.val&&h.val instanceof Array){if(h.mult&&1!=h.mult)for(n=0;n<h.val.length;n++)h.val[n]*=h.mult;1===h.val.length&&(h.val=h.val[0]),this[t]=h.val}else"path"==t&&h.val?(r=this[t].c,this[t]=h.val,this[t].c=r):ee.call(h)&&o.push(h)}if(this.isPropertyUpdated_=!1,this.isPropertiesUpdated=function(){return!1},i||0<o.length){for(var l=0,c=a;l<c.length;l++){var u=c[l];this[u.key]=u.data.getValueAtTime(0)}return this.isPropertiesUpdated=function(){return e.isPropertyUpdated_||o.some(function(t){return t.isPropertiesUpdated()})},this.updateProperties=function(t){for(var e=!1,i=0;i<a.length;i++){var s=a[i].key,n=JSON.parse(JSON.stringify(this[s])),r=a[i].data.getValueAtTime(t),e=e||!q.deepEqual(n,r);this[s]=r}this.isPropertyUpdated_=e;for(i=0;i<o.length;i++)o[i].updateProperties(t)}.bind(this),!0}return!1}function ie(t){this.zo=1.38888*t.w,this.p=[t.w/2,t.h/2,-this.zo],this.an=[t.w/2,t.h/2,0],this.o=[0,0,0],this.rx=0,this.ry=0,this.rz=0,this.isDefaultCam=!0;var e=this.t=!1;this.isPropertiesUpdated=function(){return!e&&(e=!0)}}var B={COMP:te},se={default:"Default","items[0].clickUrl":"Item_1","items[1].clickUrl":"Item_2","items[2].clickUrl":"Item_3","items[3].clickUrl":"Item_4","items[4].clickUrl":"Item_5","items[5].clickUrl":"Item_6","items[6].clickUrl":"Item_7","items[7].clickUrl":"Item_8"},ne=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return a(t,n),t.prototype.init=function(t,e,i,s){this.comp=t.comps[0],this.movie=t,window.comp=this.comp,this.B=B,this.mergeMapping(),this.refactorTextData(),n.prototype.init.call(this,this.comp,e,i,s),this.scheduleSubLoad()},t.prototype.scheduleSubLoad=function(){var t=this;comp.loadInitialFootages(),!0!==this.isVpaid&&adParams.subLoadDelay?-1===adParams.subLoadDelay?FB.sendMsgToHost("getLoadStatus"):setTimeout(function(){t.initSubLoad()},1e3*adParams.subLoadDelay):this.initSubLoad()},t.prototype.initSubLoad=function(){this.fire("sub_load_initiated"),comp.loadAllFootages()},t.prototype.mergeMapping=function(){var E=this,z;if("undefined"!=typeof mapping){this.isPlatformMapped="true"===adParams.custom.isPlatformMapped;for(var t=mapping.dynamicMapping,e=function(e,i,t){try{var s=t.conditions,n=t.colorOverlay,r=t.clickUrl,a=t.widget,o=t.alt,h=t.fillColor,l=t.isValid,c=t.resizeOption,u=t.strokeColor,p=t.txtData,d=t.url,f=t.html,m=t.mappingId;if(!l)return"continue";var v=void 0,g=null==(z=I.movie.comps.find(function(t){return+t.id==+e}))?void 0:z.l,v=I.isPlatformMapped?null==g?void 0:g.find(function(t){return t.mappingId===m}):null==g?void 0:g.find(function(t){return+t.i==+i});if(!v)return"continue";if(!I.isPassConditions(s))return I.removeLayerWithChildren(+v.i,e),"continue";v.i=+v.i;var y=v.ty,x=v.eff;switch(y){case"Shape":v.shape.shapes.forEach(function(t){h&&t.fill&&E.eval(h)&&(t.fill.o.c.val=E.hexToRgb(E.eval(h)),t.fill.t=A.Solid),u&&t.stroke&&E.eval(u)&&(t.stroke.o.c.val=E.hexToRgb(E.eval(u)),t.stroke.t=A.Solid)});break;case"Image":o&&(v.image.alt=I.eval(o)),d&&(v.image.url=I.eval(d)),c&&(v.image.ro=c);break;case"Video":d&&(v.video.url=I.eval(d));break;case"Text":p&&(v.text.txtData=U(U(U({},v.text.txtData),p),{parts:p.parts.map(function(t){return U(U({},t),{val:t.isStatic?t.val:E.evalText(t.val)})})})),h&&I.eval(h)&&(v.text.aeSrcTxt.fColArr=I.hexToRgb(I.eval(h)).map(function(t){return t/255})),u&&I.eval(u)&&(v.text.aeSrcTxt.sColArr=I.hexToRgb(I.eval(u)).map(function(t){return t/255}));break;case"Precomp":f&&(v.html=I.eval(f),v.ty="HTMLWidget")}if(r&&(v.clk="default"!==r&&I.eval(r)||"default",I.isPlatformMapped?v.clkType=style[r.paramKey].includes("items")?"Item_".concat(r.index+1):"Custom":v.clkType=se[r]||"Custom"),a&&!v.tm&&!["Null","Audio"].includes(y)){for(var w=style[a.paramKey],_=0,b=Object.entries(w.args);_<b.length;_++){var M=b[_],T=M[0],k=M[1],C=k.value,S=k.isDynamic;w.args[T]=S?eval(style[C])(a.index):C}v.widget=w,v.originalType=v.ty,v.ty="Widget"}var P=x.find(function(t){return"colOver"===t.ty});P&&n&&(P.c=I.hexToRgb(I.eval(n)))}catch(t){FB.reportError("Failed to map layer ".concat(i,". (comp ").concat(e,")"),t)}},I=this,i=0,s=t;i<s.length;i++){var n=s[i],r=n.compId,a=n.layerId,o=n.dynamicDataObj;e(r,a,o)}}},t.prototype.hexToRgb=function(t){return t.substring(1).match(/.{2}/g).map(function(t){return parseInt(t,16)})},t.prototype.rgbToHex=function(t){return"#".concat(t.map(function(t){return Math.round(255*+t).toString(16).padStart(2,"0")}).join(""))},t.prototype.removeLayerWithChildren=function(e,i){var t=movie.comps.find(function(t){return t.id===i});t.l=t.l.filter(function(t){return+t.i!=+e});for(var s=0,n=t.l;s<n.length;s++){var r=n[s],a=r.i,o=r.pi,r=r.has_tm;o!==e&&r!==e||this.removeLayerWithChildren(a,i)}},t.prototype.eval=function(t){var e,i;return this.isPlatformMapped?(e=t.paramKey,i=t.index,eval(style[e])(i)):eval(t)},t.prototype.evalText=function(t){var i=t.index||0,s=this.eval(t)||"",e=function(t){s.startsWith("JSON3=")&&(t=JSON.parse('"'.concat(t,'"')));var e=eval(t.replace(/\u241E/g,""))(i);return s.startsWith("JSON3=")&&(e=JSON.stringify(e).replace(/(^")|("$)/g,"")),e};return s.replace(/\u241E.+?\u241E/gs,e)},t.prototype.isPassConditions=function(t){return null!=t&&t.length?this.isPlatformMapped?t.every(function(t){var e=t.index,i=t.value,s=t.paramKey;return i?s?eval(style[s])()===i:eval(i)(e):!0}):eval(t.join(" && ")):!0},t.prototype.getFontFamily=function(t){var e=t.replace(/^(.+)-.*$/,"$1");return["arial","times","times new roman"].includes(e.toLowerCase())?e.toLowerCase():t},t.prototype.refactorTextData=function(){for(var w=this,_=/\r\n|\n|\r|\u0003|\$\$/,t=0,e=this.movie.comps;t<e.length;t++)for(var b,i=e[t],s=function(t){if("Text"!==t.ty&&"Text"!==t.originalType)return"continue";var n=t.text.aeSrcTxt,e=t.text.txtData||{},i=e.parts,s=e.textVerticalAlign,s=void 0===s?n.verticalAlign||0:s,r=e.minFontSize,r=void 0===r?5:r,e=e.strikeWidth,e=void 0===e?0:e,a=(n.lead||1.2*n.size)/n.size,o=[{url:"",family:n.fontFamily,weight:n.weight,italic:n.italic}],h={color:M.rgbToHex(n.fColArr),size:n.size,sizeUnits:"px",style:n.italic?"italic":"normal",text:"",weight:n.weight,x_shift:0,y_shift:n.blShift,letterSpacing:n.trk||0,strikeThrough:e,strokeWidth:n.sColArr?n.sWidth:0,strokeColor:n.sColArr?M.rgbToHex(n.sColArr):null,strokeOverFill:n.sOverF,family:n.fontFamily};if(null!=i&&i.length)if(null!=(b=i[0].val)&&b.startsWith("JSON3=")){var l=JSON.parse(i[0].val.substring(6)),c=(void 0===(l=Array.isArray(l)?{allCaps:!1,wrapText:!1,globalScale:!1,verticalAlign:0,minFontSize:r,lines:l}:l).verticalAlign&&(l.verticalAlign=0),l.source="complexText",[]),u=null;l.lines.forEach(function(s){s.lead||(s.lead=1),u=U(U({},s),{parts:[]}),s.parts.forEach(function(e){"original"===e.weight&&(e.weight=n.weight),"original"===e.style&&(e.style=!0===n.italic?"italic":"normal"),"rel_px"===e.sizeUnits&&(e.size=n.size+e.size),void 0===e.letterSpacing&&(e.letterSpacing=l.letterSpacing||0),e.family||(e.family=n.fontFamily);var t=e.text.split("\n"),i=t[0],t=t.slice(1);u.parts.push(U(U({},e),{text:i})),t.forEach(function(t){c.push(u),u=U(U({},s),{parts:[U(U({},e),{text:t})]})})}),c.push(u)}),l.fonts||(l.fonts=o),t.text.txtObj=U(U({},l),{lines:c})}else{for(var p=i.some(function(t){return 0!==t.blShift}),d=n.justif.toLowerCase()[0],f=function(t){var e;return U(U({},h),{size:null!=(e=t.size)?e:n.size,text:t.val,y_shift:p?-t.blShift:n.blShift})},m=[],v={align:d,lead:a,parts:[]},g=0,y=i;g<y.length;g++)!function(e){var t=e.val.split(_),i=t[0],t=t.slice(1);v.parts.push(f(U(U({},e),{val:i}))),t.forEach(function(t){m.push(v),(v={align:d,lead:a,parts:[]}).parts.push(f(U(U({},e),{val:t})))})}(y[g]);m.push(v),t.text.txtObj={allCaps:12<=adParams.format.ver&&n.allCaps,wrapText:!0,globalScale:!0,verticalAlign:s,minFontSize:r,lines:m,fonts:o}}else n.txtObj?t.text.txtObj=n.txtObj:t.text.txtObj={allCaps:12<=adParams.format.ver&&n.allCaps,wrapText:!0,globalScale:!0,verticalAlign:s,minFontSize:r,fonts:o,lines:n.txt.split(_).map(function(t){return{align:n.justif.toLowerCase()[0],lead:a,parts:[U(U({},h),{text:t})]}})};if(t.text.txtObj.fonts||(t.text.txtObj.fonts=o),t.text.txtObj.fonts.forEach(function(t){return t.family=w.getFontFamily(t.family)}),t.text.txtObj.lines.forEach(function(t){return t.parts.forEach(function(t){return t.family=w.getFontFamily(t.family)})}),t.text.txtObj.ver||(t.text.txtObj.ver=0),b={},0===t.text.txtObj.ver&&adParams.format.ver<14&&("complexText"===t.text.txtObj.source&&(b.noVerticalScaleDownToFitHeight=!0,n.boxTxtS)&&(b.legacyYCorrectionComplexTextBoxTxt=!0),b.noTrimOverflowedHeight=!0,b.HScaleUse98=!0),t.text.txtObj.features=b,n.boxTxtS)t.text.textBox={x:n.boxTxtP.x,y:n.boxTxtP.y,w:n.boxTxtS.w,h:n.boxTxtS.h};else{var x={x:0,y:.7*-n.size,w:t.text.pointTextWidth,h:.7*n.size+(n.txt.split(_).length-1)*(a*n.size)};switch(n.justif.toLowerCase()){case"left":x.x=0;break;case"right":x.x=-x.w;break;default:x.x=-x.w/2}t.text.textBox=x}},M=this,n=0,r=i.l;n<r.length;n++)s(r[n])},t}(G),s,re,k,C,ae,oe,S,he=(window.clinchPlayer=ne,window.ClinchViewability=function(){this._id=null,this._options={rootMargin:"0px",threshold:[.5]},this._observer,this._undetermined=!1,this._previousIntersectionRatio=null,this._isInView=null,this._inViewDefinition=.5,this._events={},this._viewableImpression={startTime:void 0,timeoutHandler:void 0,fired:!1,minDuration:void 0},this._unsubscribeHandlers=[];function i(){this._viewableImpression.startTime=(new Date).getTime(),this._viewableImpression.timeoutHandler=setTimeout(function(){this._viewableImpression.fired=!0,n.call(this,s["viewable.impression"],{})}.bind(this),this._viewableImpression.minDuration)}this.init=function(t,e){this._id=t,this._viewableImpression.minDuration=e;try{this._observer=new IntersectionObserver(function(t,e){this._previousIntersectionRatio?this._previousIntersectionRatio>t[0].intersectionRatio?(this._viewableImpression.startTime=void 0,clearTimeout(this._viewableImpression.timeoutHandler),this._viewableImpression.timeoutHandler=void 0,n.call(this,s["container.hidden"],{ratio:t[0].intersectionRatio})):(this._viewableImpression.fired||i.call(this),n.call(this,s["container.shown"],{ratio:t[0].intersectionRatio})):(this._isInView=t[0].intersectionRatio>=this._inViewDefinition,this._isInView&&!this._viewableImpression.fired&&(i.call(this),n.call(this,s["container.shown"],{ratio:t[0].intersectionRatio}))),this._previousIntersectionRatio=t[0].intersectionRatio}.bind(this),this._options)}catch(t){return void(this._undetermined=!0)}this._observer.observe(cp_.containerDiv.ownerDocument.querySelector("#"+this._id))},this.listen=function(t,e){var i;this._undetermined||(this._events[t]||(this._events[t]=[]),this._events[t].push(e),i=function(){this._events[t]=this._events[t].filter(function(t){return e!==t})}.bind(this),this._unsubscribeHandlers.push(i))},this.unsubscribeAll=function(){for(var t=0;t<this._unsubscribeHandlers.length;t++)this._unsubscribeHandlers[t]()},this.stopObserving=function(){this._observer.unobserve(document.querySelector("#"+this._id))};var s={"container.shown":"container.shown","container.hidden":"container.hidden","viewable.impression":"viewable.impression"},n=function(t,e){t=this._events[t];t&&t.forEach(function(t){t.call(null,e)})}},window.clinchSdk={multiLineSeperatorsStrs:["$$","\r","\n","<br>","<br />","<br/>"],multiLineReplaces:["$$","\r\n","\n\r","\r","\n","<br/>","<br />"],getAdStatus:function(){return cp_.getStatus()},pause:function(){cp_.Pause()},play:function(){cp_.Play()},mute:function(){cp_.Mute(!0)},unmute:function(){cp_.Mute(!1)},setVolume:function(t){cp_.Volume(t)},addEventListener:function(t,e){cp_.addListener(t,e)},removeEventListener:function(t,e){cp_.removeListener(t,e)},click:function(t){var e=t.type||"",i=t.tags||"",s=t.clickPixels||[],n=null,r=(adParams.InAdclk&&(r=adParams.InAdclk.trkPerLabel[e||"main"])&&r.lp&&(n=r.lp),t.url||n||adParams.clickUrl||adParams.fbClickUrl),n={x:t.x||0,y:t.y||0},r=q.genClkChain(r);q.reportClick(r,e,i,s,n),q.isMraid()?q.sendMsgToHost("open,"+r):window.open(r,"_blank")},engage:function(t){var e={x:t.x||0,y:t.y||0};q.reportEngage(t.type,t.tags,t.clickPixels,e)},getAdContainer:function(){var t;return null==(t=null==(t=null===cp_||void 0===cp_?void 0:cp_.comp)?void 0:t.renderer)?void 0:t.domElement},getExtAdContainer:function(){return cp_.containerDiv},getAdFonts:function(){return[]},getDynImgUrl:function(t,e,i,s,n){return q.getDynImgUrl(t,e,i,s,n)},resizeFontToFitWidth:function(t){try{var e=document.getElementsByClassName(t);if(0!==e.length){var i=document.createElement("canvas").getContext("2d");i.save();for(var s=0;s<e.length;s++){var n=e[s],r=n.children;if(0<r.length){for(var a=0,o=0;o<r.length;o++){var h,l,c,u=r[o].innerText;u&&(d=window.getComputedStyle(r[o]))&&(m=d.getPropertyValue("font-size")||"20px",h=d.getPropertyValue("font-weight")||400,l=d.getPropertyValue("font-style")||"normal",c=d.getPropertyValue("font-family")||"",m=parseInt(m),i.font=q.getCtxFont(l,h,m,c),a+=i.measureText(u).width)}if(a){var p=(g=window.getComputedStyle(n)).getPropertyValue("width")||"";if(.95*(p=parseInt(p))<a)for(o=0;o<r.length;o++){var d,f,m,v=function(style){try{var t,e,i=style.transform||style.webkitTransform||style.mozTransform;return"none"===i?{x:0,y:0,z:0}:(t=i.includes("3d")?"3d":"2d",e=i.match(/matrix.*\((.+)\)/)[1].split(", "),"2d"==t?{x:e[4],y:e[5],z:0}:"3d"==t?{x:e[12],y:e[13],z:e[14]}:void 0)}catch(t){return{x:0,y:0,z:0}}}(d=window.getComputedStyle(r[o]))||{x:0,y:0,z:0};d&&(f=.95*p/a,m=d.getPropertyValue("font-size")||"20px",m=parseInt(m),r[o].style.fontSize=m*f+"px",(v.x||v.y||v.z)&&(r[o].style.transform=""),v.x&&(r[o].style.transform+=" translateX("+v.x*f+"px)"),v.y)&&(r[o].style.transform+=" translateY("+v.y*f+"px)")}}}else{var g,y,x,w,_,b,M=n.innerText;M&&(g=window.getComputedStyle(n))&&(y=g.getPropertyValue("font-weight")||400,x=g.getPropertyValue("font-style")||"normal",w=g.getPropertyValue("font-size")||"20px",_=g.getPropertyValue("font-family")||"",p=g.getPropertyValue("width")||"")&&(p=parseInt(p),w=parseInt(w),i.font=q.getCtxFont(x,y,w,_),.95*p<(b=i.measureText(M).width))&&(n.style.fontSize=parseInt(w*(.95*p)/b)+"px")}}}}catch(t){}},resizeFontToFitWidthForMultiLine:function(t){try{var e=document.getElementsByClassName(t),i=document.createElement("canvas").getContext("2d");if(i.save(),0!==e.length)for(var s=0;s<e.length;s++){var n=e[s],r=window.getComputedStyle(n);if(r){var a=void 0,o=void 0,h=void 0,l=(n.dataset.originTxt?(a=n.dataset.originTxt,o=parseInt(n.dataset.originFontSize),h=parseFloat(n.dataset.originLineHeight)):(a=n.innerHTML,o=r.getPropertyValue("font-size")||"20px",o=parseInt(o),h=r.getPropertyValue("line-height"),h=parseFloat(h)||o,n.dataset.originTxt=a,n.dataset.originFontSize=o,n.dataset.originLineHeight=h),n.dataset.minFontSize||10),c=r.getPropertyValue("font-weight")||400,u=r.getPropertyValue("font-style")||"normal",p=r.getPropertyValue("font-family")||"",d=r.getPropertyValue("width")||"",f=n.dataset.maxHeight||r.getPropertyValue("height")||"";if(d&&f){for(var d=parseInt(d),f=parseInt(f),m=parseFloat(h/o),v=(m<1&&(m=1),!1),g=0;g<clinchSdk.multiLineSeperatorsStrs.length;g++)if(-1<a.indexOf(clinchSdk.multiLineSeperatorsStrs[g])){for(var v=!0,y=0;y<clinchSdk.multiLineReplaces.length;y++)a=a.replace(new RegExp(clinchSdk.multiLineReplaces[y],"g"),"<br>");break}if(v){var x=a.split("<br>");if(x&&0<x.length){for(var w=x[0],_=i.measureText(w).width,g=1;g<x.length;g++){var b=x[g],M=i.measureText(b).width;_<M&&(_=M,0)}var T,k=1,C=(.95*d<_&&(k=_/(.95*d)),h*x.length);.98*f<C&&k<(T=C/(.98*f))&&(k=T),n.innerHTML=x.join("<br>"),Math.floor(o/k)<l&&(k=o/l),n.style.fontSize=Math.floor(o/k)+"px",n.style.lineHeight=h/k+"px"}}else{var S={status:"ok",lines:[a]},P=a,E=o;o<=l&&q.log("ClinchSdk: resizeFontToFitWidthForMultiLine font size smaller than minimum font size."),f<o&&q.log("ClinchSdk: resizeFontToFitWidthForMultiLine div height is less then font size.");for(var z=o;l<=z;z--){var I=Math.floor(f/(z*m)),E=z,A=z===l;if(i.font=q.getCtxFont(u,c,z,p),"ok"===(S=clinchSdk.wrapText(i,P,d,I,!0,A)).status)break}n.innerHTML=S.lines.join("<br>"),n.style.fontSize=E+"px",n.style.lineHeight=h*(E/o)+"px"}}}}}catch(t){}}},function(){function t(){s.add(this),re.set(this,[]),k.set(this,null),C.set(this,null),ae.set(this,null),oe.set(this,!1),this.fireMouseEnter=this.fireMouseEnter.bind(this),this.fireMouseLeave=this.fireMouseLeave.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}return t.prototype.init=function(){var i=this;window.addEventListener("load",function(){var t=clinchSdk.getAdContainer();if(!(!1 in window)&&t)try{t.addEventListener("mouseenter",i.fireMouseEnter),t.addEventListener("mouseleave",i.fireMouseLeave),document.addEventListener("visibilitychange",i.handleVisibilityChange),d(i,ae,new IntersectionObserver(function(t){var t=t[0].intersectionRatio,e=!!c(i,C,"f"),t=.5<=t;e&&!t&&i.fireOutOfView(),!e&&t&&i.fireInView()},{threshold:[.5]}),"f"),c(i,ae,"f").observe(t),window.addEventListener("beforeunload",function(){i.fireSummery()}),setTimeout(function(){return i.fireSummery()},6e5)}catch(t){c(i,s,"m",S).call(i,{stype:"error",message:t.message})}})},t.prototype.fireInView=function(){d(this,C,(new Date).getTime(),"f"),c(this,s,"m",S).call(this,{stype:"in_view"})},t.prototype.fireOutOfView=function(){var t;c(this,C,"f")&&(t=((new Date).getTime()-c(this,C,"f"))/1e3,d(this,C,null,"f"),c(this,s,"m",S).call(this,{stype:"out_of_view",duration:t}))},t.prototype.fireMouseEnter=function(){d(this,k,(new Date).getTime(),"f"),c(this,s,"m",S).call(this,{stype:"hover_in"})},t.prototype.fireMouseLeave=function(){var t;c(this,k,"f")&&(t=((new Date).getTime()-c(this,k,"f"))/1e3,d(this,k,null,"f"),c(this,s,"m",S).call(this,{stype:"hover_out",duration:t}))},t.prototype.handleVisibilityChange=function(){document.hidden&&this.fireSummery()},t.prototype.fireSummery=function(){try{var t;c(this,oe,"f")||(d(this,oe,!0,"f"),(t=clinchSdk.getAdContainer()).removeEventListener("mouseenter",this.fireMouseEnter),t.removeEventListener("mouseleave",this.fireMouseLeave),document.removeEventListener("visibilitychange",this.handleVisibilityChange),c(this,ae,"f").disconnect(),c(this,k,"f")&&this.fireMouseLeave(),c(this,C,"f")&&this.fireOutOfView(),c(this,s,"m",S).call(this,{stype:"aggregate",allevents:JSON.stringify(c(this,re,"f"))}))}catch(t){c(this,s,"m",S).call(this,{stype:"error",message:t.message})}},t}()),re=new WeakMap,k=new WeakMap,C=new WeakMap,ae=new WeakMap,oe=new WeakMap,s=new WeakSet,S=function(t){var e=new URLSearchParams(FB.pxlDims);c(this,re,"f").push(t);for(var i=0,s=Object.entries(t);i<s.length;i++){var n=s[i],r=n[0],n=n[1];e.set(r,n)}(new Image).src=FB.trkHost+"/att?"+e.toString()},le=new he;"toJSON"in Error.prototype||Object.defineProperty(Error.prototype,"toJSON",{value:function(){var e={};return Object.getOwnPropertyNames(this).forEach(function(t){e[t]=this[t]},this),e},configurable:!0,writable:!0}),window.addEventListener("message",q.receiveMsg);try{Element.prototype.hasClass=function(t){return new RegExp(" "+t+" ").test(" "+this.className+" ")},Element.prototype.addClass=function(t){this.hasClass(t)||(this.className+=" "+t)},Element.prototype.removeClass=function(t){var e=" "+this.className.replace(/[\t\r\n]/g," ")+" ";if(this.hasClass(t)){for(;0<=e.indexOf(" "+t+" ");)e=e.replace(" "+t+" "," ");this.className=e.replace(/^\s+|\s+$/g,"")}},Element.prototype.remove=function(){null!=this.parentNode&&this.parentNode.removeChild(this)},Element.prototype.offset=function(){var t,e=this&&this.ownerDocument,i={top:0,left:0};if(e)return t=e.documentElement,null==this.parentNode?i:(i=this.getBoundingClientRect(),e=9===e.nodeType&&e.defaultView,{top:i.top+e.pageYOffset-t.clientTop,left:i.left+e.pageXOffset-t.clientLeft})}}catch(t){q.reportExceptionError("elements_proto_declare",t)}"true"===adParams.custom.attentionEvents&&le.init();
